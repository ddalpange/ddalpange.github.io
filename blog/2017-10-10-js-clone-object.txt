0:[[["",{"children":["blog",{"children":[["slug","2017-10-10-js-clone-object","d"],{"children":["__PAGE__?{\"slug\":\"2017-10-10-js-clone-object\"}",{}]}]}]},"$undefined","$undefined",true],"$L1","$L2"]]
3:I{"id":"2070","name":"","chunks":["131:131-b649a46ff1b8d8bb","185:app/layout-87ffce805221756c"],"async":false}
4:I{"id":"7131","name":"","chunks":["131:131-b649a46ff1b8d8bb","931:app/page-2232f5a403b269c2"],"async":false}
5:I{"id":"830","name":"","chunks":["272:webpack-f52214c701e5e4ec","776:0b7c6ed9-5895ea2b955a8219","474:474-2bfbc4a0bef14471"],"async":false}
6:I{"id":"2079","name":"","chunks":["272:webpack-f52214c701e5e4ec","776:0b7c6ed9-5895ea2b955a8219","474:474-2bfbc4a0bef14471"],"async":false}
1:[["$","html",null,{"lang":"en","data-theme":"retro","children":[["$","head",null,{"children":["$","link",null,{"rel":"stylesheet","type":"text/css","href":"https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css"}]}],["$","body",null,{"className":"flex flex-col items-center h-[100svh]","children":[["$","$L3",null,{"src":"https://www.googletagmanager.com/gtag/js?id=G-XR7V7MF96T","strategy":"afterInteractive"}],["$","$L3",null,{"id":"google-analytics","strategy":"afterInteractive","children":"\n          window.dataLayer = window.dataLayer || [];\n          function gtag(){window.dataLayer.push(arguments);}\n          gtag('js', new Date());\n\n          gtag('config', 'G-XR7V7MF96T');\n        "}],["$","div",null,{"className":"w-full max-w-3xl flex-grow","children":[["$","div",null,{"className":"navbar","children":[["$","div",null,{"className":"flex-1","children":["$","$L4",null,{"className":"p-2 hover:underline md:text-2xl font-bold flex gap-4 items-center","href":"/","children":"Yozzing Blog"}]}],["$","div",null,{"className":"flex-none","children":["$","div",null,{"className":"tabs","children":[["$","$L4",null,{"className":"tab","href":"/engineering","children":"Engineering"}],["$","$L4",null,{"className":"tab","href":"/essay","children":"Essay"}],["$","a",null,{"className":"tab","href":"https://github.com/ddalpange","children":["$","div",null,{"className":"avatar","children":["$","div",null,{"className":"w-8 rounded-full","children":["$","img",null,{"src":"/blog/images/profile.jpeg"}]}]}]}]]}]}]]}],["$","div",null,{"className":"p-4 pb-10","children":["$","$L5",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L6",null,{}],"templateStyles":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":"$undefined","asNotFound":false,"childProp":{"current":["$","$L5",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L6",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","asNotFound":false,"childProp":{"current":["$","$L5",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children",["slug","2017-10-10-js-clone-object","d"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L6",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","asNotFound":false,"childProp":{"current":["$L7","$@8"],"segment":"__PAGE__?{\"slug\":\"2017-10-10-js-clone-object\"}"}}],"segment":["slug","2017-10-10-js-clone-object","d"]}}],"segment":"blog"}}]}]]}]]}]]}],"$@9"]
2:[[["$","meta",null,{"charSet":"utf-8"}],["$","title",null,{"children":"자바스크립트 객체 복사하기"}],["$","meta",null,{"name":"description","content":"<h4>시작하기 전에</h4>\n<p><strong>A코드</strong></p>\n<pre><code>let a = 1;\nlet b = a;\nb = 2;\nconsole.log(a, b);\n</code></pre>\n<p><strong>B코드</strong></p>\n<pre><code>let a = { p : 1 };\nlet b = a;\nb.p = 2;\nconsole.log(a.p, b.p);\n</code></pre>\n<p>A코드와 B코드 두가지의 코드가 있다.\n두 코드 모두 <code>b에 a를 대입하였다.</code>라고 생각하는가?\n혹은\n두 코드 모두 <code>b에 a를 복사하였다</code>라고 생각하는가?</p>\n"}],null,[[["$","link",null,{"rel":"author","href":"https://github.io/ddalpange"}],["$","meta",null,{"name":"author","content":"ddalpange"}]]],null,null,["$","meta",null,{"name":"keywords","content":"Javascript,DeepCopy,ShallowCopy"}],null,null,null,["$","meta",null,{"name":"viewport","content":"width=device-width, initial-scale=1"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,null,null,null,[null,[["$","link",null,{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"any"}]],[],null]]
7:["$","article",null,{"className":"prose","children":[["$","h1",null,{"children":"자바스크립트 객체 복사하기"}],["$","caption",null,{"children":"2017/10/10"}],["$","div",null,{"dangerouslySetInnerHTML":{"__html":"<h4>시작하기 전에</h4>\n<p><strong>A코드</strong></p>\n<pre><code>let a = 1;\nlet b = a;\nb = 2;\nconsole.log(a, b);\n</code></pre>\n<p><strong>B코드</strong></p>\n<pre><code>let a = { p : 1 };\nlet b = a;\nb.p = 2;\nconsole.log(a.p, b.p);\n</code></pre>\n<p>A코드와 B코드 두가지의 코드가 있다.\n두 코드 모두 <code>b에 a를 대입하였다.</code>라고 생각하는가?\n혹은\n두 코드 모두 <code>b에 a를 복사하였다</code>라고 생각하는가?</p>\n<p>결론부터 말하자면 <strong>틀렸다</strong>.\n자바스크립트는 불변형의 데이터를 선언할 때 포인터와 값 모두 생성하지만,\n오브젝트(배열)을 생성할 때에는 메모리 절약을 위해 포인터만 새로 할당할 뿐이다.</p>\n<p>즉 A코드에서는 <code>b에 a를 복사하였다.</code>가 맞는것이고\nB코드에서는 <code>b에 a를 대입하였다.</code>가 맞는 해석이 된다.\n이제 B코드에서 <code>b에 a를 복사하였다</code>가 성립하도록 해보자.</p>\n<h4>1. <a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\">Object.assign()</a>을 이용</h4>\n<pre><code>function cloneObject(obj) {\n  return Object.assign({}, obj);\n}\n</code></pre>\n<p><strong>Object.assign</strong>은 첫번째 인자로 들어오는 객체에 두번째 인자로 들어오는 객체의 프로퍼티들을 차례대로 덮어쓰기하여 반환하는 메소드이다.\n여기서 주의할 점은 <strong>Object.assign</strong>은 프로퍼티들에 대한 참조를 덮어쓰기하기 때문에, 오브젝트 안에 오브젝트 또는 배열이 있을 경우 복사가 아닌 참조를 하게된다.\n즉 객체를 <code>얕은 복사(Shallow Copy)</code>한다.</p>\n<h4>2. JSON 객체의 메소드를 이용</h4>\n<pre><code>function cloneObject(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n</code></pre>\n<p><strong>JSON.stringify</strong>는 자바스크립트 오브젝트를 스트링 포멧으로 변환하는 메소드이다.\n<strong>JSON.parse</strong>는 스트링 포멧을 자바스크립트 오브젝트로 변환하는 메소드이다.</p>\n<p>스트링으로 변환하였다가 다시 오브젝트로 변환하기 때문에 이전 객체에 대한 참조가 없어지지만 JSON 메소드 자체가 성능면에서 다른 방법에 비해 굉장히 느리기 때문에 주의해야한다.\n이 방법은 객체를 <code>깊은 복사(Deep Copy)</code>한다.</p>\n<h4>3. 자바스크립트 재귀 사용</h4>\n<pre><code>function cloneObject(obj) {\n    var clone = {};\n    for(var i in obj) {\n        if(typeof(obj[i])==\"object\" &#x26;&#x26; obj[i] != null)\n            clone[i] = cloneObject(obj[i]);\n        else\n            clone[i] = obj[i];\n    }\n    return clone;\n}\n</code></pre>\n<p>오브젝트의 프로퍼티들을 순회하여 빈 오브젝트에 더한다. 그 과정에서 원본 오브젝트의 프로퍼티가 오브젝트일 경우 재귀적으로 함수를 실행한다.\n이 방법은 객체를 <code>깊은 복사(Deep Copy)</code>한다.</p>\n<h4>4. <a href=\"https://facebook.github.io/immutable-js/\">Immutable.js</a> 사용</h4>\n<pre><code>import { Map } from 'immutable';\n\nlet map = Map({a : 1});\nlet newMap = map;\nnewMap.set('a', 2);\nconsole.log(map.get('a'));\nconsole.log(newMap.get('a'));\n</code></pre>\n<p>페이스북에서 만든 오픈소스 라이브러리이다.\nImmutable을 쓰게된다면 Array, Map 모두 이뮤터블하게 쓸 수 있게된다.\n객체의 내부 값을 변경해도 원본 객체의 값은 변화하지 않고 새로운 객체를 배출한다는 뜻이다.\n사용법이 비교적 간편하지만 처음 보는 사람일 경우 적응하는데 어려움이 있을 수 있다.</p>\n<blockquote>\n<p>여담이지만 이 라이브러리를 사용할 때 로그를 찍을려면 <strong>toJS</strong>메소드를 사용하여 순수 자바스크립트 객체로 변환해야하는데 매번 까먹어서 불편했다 :(</p>\n</blockquote>\n<h4>정리하며</h4>\n<p>사실 유지보수나 신규개발을 하면서 객체의 딥카피가 필요한 경우는 많이 없었다.\n대부분 스왈로카피로 해결할 수 있으며 딥카피는 피하는것이 더 빠르고 직관적이기 때문이다.</p>\n<p>주의할 점은 단순히 <code>=</code>를 통해 변수를 대입하는것과  <code>얕은 복사</code>는 엄연히 다르다는 것이다.\n<code>=</code>와 <code>얕은 복사</code>와 <code>깊은 복사</code>의 차이만 알아가도 성공한것이 아닐까 ?\n이것을 모르는 개발자들이 적지 않아서 조금 놀랐다.</p>\n"}}]]}]
8:[null,null,[]]
9:[null,null,[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/26e6607032fead05.css","precedence":"next.js"}]]]
