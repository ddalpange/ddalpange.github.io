<!DOCTYPE html><html lang="en" data-theme="retro"><head><meta charSet="utf-8"/><link rel="preconnect" href="https://cdn.jsdelivr.net"/><link rel="stylesheet" href="/_next/static/css/4640374ce090311f.css" data-precedence="next.js"/><link rel="preload" as="style" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css"/><link rel="preload" as="script" href="https://www.googletagmanager.com/gtag/js?id=G-XR7V7MF96T"/><title>자바스크립트 클로져</title><meta name="description" content="&lt;p&gt;자바스크립트의 주요 개념중 하나인 클로져에 대해 자세히 알아보자.&lt;/p&gt;
"/><link rel="author" href="https://github.io/ddalpange"/><meta name="author" content="ddalpange"/><meta name="keywords" content="Javascript,Closure"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="any"/><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" nomodule=""></script></head><body class="flex flex-col items-center h-[100svh]"><div class="w-full max-w-3xl flex-grow"><div class="navbar"><div class="flex-1"><a class="p-2 hover:underline md:text-2xl font-bold flex gap-4 items-center" href="/">Yozzing Blog</a></div><div class="flex-none"><div class="tabs"><a class="tab" href="/engineering">Engineering</a><a class="tab" href="/essay">Essay</a><a class="tab" href="https://github.com/ddalpange"><div class="avatar"><div class="w-8 rounded-full"><img alt="yozzing" src="/blog/images/profile.jpeg"/></div></div></a></div></div></div><div class="p-4 pb-10"><article class="prose max-w-full flex flex-col items-center"><span class="mb-2">over 5 years ago</span><h1>자바스크립트 클로져</h1><div><div class="prose self-center"><p>자바스크립트의 주요 개념중 하나인 클로져에 대해 자세히 알아보자.</p>
<p><strong>클로져</strong></p>
<p>클로져는 독립적인 (자유) 변수 (지역적으로 사용되지만, 둘러싼 범위 안에서 정의된 변수)를 참조하는 함수들이다.
다른 말로 해석하면,
이 함수들은 그들이 생성된 환경을 <strong>기억</strong>한다.</p>
<p><strong>한가지 의문</strong></p>
<p>클로져는 지역적으로 선언되었지만, 해당 함수가 선언된 블럭 안에 있는 독립된 변수들을 참조할 수 있는 함수라고 하였다.
위 문장에서만 보면 자바스크립트의 모든 함수는 해당 블럭의 변수를 참조할 수 있음으로 자바스크립트의 모든 함수는 클로져라 할 수 있다.
하지만 과연 자바스크립트의 모든 함수는 클로져일까 ??</p>
<pre><code>function init() {
  var name = &quot;Mozilla&quot;;
  
  function displayName() { // displayName()은 내부 함수인, 클로져다
    alert(name); // 부모 함수에서 선언된 변수를 사용한다
  }

  displayName();
}

init();
</code></pre>
<p><code>displayName</code>은 자신이 선언된 환경을 기억하였다. 그렇다면 <code>displayName</code>은 클로져라고 부를 수 있는가 ?</p>
<pre><code>function makeFunc() {
  var name = &quot;Mozilla&quot;;

  function displayName() {
    alert(name);
  }

  return displayName;
}

var myFunc = makeFunc();
myFunc();
</code></pre>
<p><code>myFunc</code> 를 실행했을 때 <code>makeFunc</code>에 대한 참조가 없음에도 불구하고 <code>makeFunc</code>의 지역변수인 <code>name</code> 변수에 정상적으로 접근할 수 있다. 이상하지 않은가?</p>
<p><code>displayName</code>은 자신이 선언된 스코프에서 벗어나 global 환경에서 초기화되었다.
스코프 탐색은 실행스택과는 관련이 없는 <code>makeFunc</code>를 거쳐갔으며 <code>displayName</code>의 외부 스코프는 global이 아닌 <code>makeFunc</code>의 스코프이다.</p>
<p><code>myFunc</code>가 글로벌 환경에서 초기화 되더라도 리턴된 <code>dispalyName</code>의 스코프체인은 <code>displayName</code> -&gt; <code>makeFunc</code> -&gt; <code>global</code> 순으로 형성된다.</p>
<p>즉 초기화되는 위치와 관계없이 해당 함수가 <strong>선언</strong>된 곳에서 스코프를 형성한다는 뜻이다.</p>
<p><code>myFunc</code>에 null을 할당하지 않으면 가비지콜렉터가 <code>makeFunc</code>의 메모리를 해제하지 않기 때문에 클로져를 사용한다면 별도로 꼭 null을 할당해줘야한다.</p>
<pre><code>function count() {
    var i;
    for (i = 1; i &lt; 10; i ++) {
        setTimeout(function timer() {
            console.log(i);
        }, i*100);
    }
}
count();
</code></pre>
<p>1 ~ 10까지 1씩 증가하여 출력하는 코드를 원했지만 결과는 기대와 달리 10이 9번 출력된다.
0.1초동안 i는 10이 되었기 때문이며 클로져함수 timer에서 외부 스코프인 <code>count</code>의 변수인 <code>i</code>에 직접 접근하여 출력하였기 때문이다.
해당 코드를 원하는 결과값으로 바꾸기 위해 어떻게 해야할까 ?</p>
<p><strong>내부 스코프를 하나 더 추가하는 방식.</strong></p>
<pre><code>function count() {
    var i;
    for (i = 1; i &lt; 10; i += 1) {
        (function(countingNumber) {
            setTimeout(function timer() {
                console.log(countingNumber);
            }, i * 100);
        })(i);
    }
}
count();
</code></pre>
<p><strong>블록 스코프를 이용하는 방식</strong></p>
<pre><code>function count() {
    &#x27;use strict&#x27;;
    for (let i = 1; i &lt; 10; i += 1) {
        setTimeout(function timer() {
            console.log(i);
        }, i * 100);
    }
}
count();
</code></pre>
<p><strong>느낀 점</strong>
클로져는 재미있는 개념이다. 클로져란 개념을 이해하기 위해서 11개 정도의 글을 정독하였는데, 사람마다 이해하는 클로져의 개념이 다 똑같은것 같지는 않다.
최대한 다양한 관점에서 클로져를 바라보고 글을 쓸려고 노력하였는데 결국 나랑 비슷한 사람의 글을 거의 베끼다시피 한것 같다.
언제나 느끼지만 글쓰기는 참 어렵다.</p>
<p><strong>참고</strong></p>
<ol>
<li>http://blog.javarouka.me/2012/01/javascripts-closure.html</li>
<li>http://meetup.toast.com/posts/86</li>
<li>http://unikys.tistory.com/309</li>
</ol>
</div></div><div class="w-5/6"><div id="disqus_thread"></div></div></article></div></div><script src="/_next/static/chunks/webpack-54cd5478b621d6d8.js" async=""></script><script src="/_next/static/chunks/0b7c6ed9-60e4a7f8e855a262.js" async=""></script><script src="/_next/static/chunks/474-c8c5eb3e5e298e46.js" async=""></script><script src="/_next/static/chunks/main-app-7b248d73399883e9.js" async=""></script></body></html><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"0:\"$L1\"\n"])</script><script>self.__next_f.push([1,"2:I{\"id\":\"9638\",\"name\":\"\",\"chunks\":[\"272:webpack-54cd5478b621d6d8\",\"776:0b7c6ed9-60e4a7f8e855a262\",\"474:474-c8c5eb3e5e298e46\"],\"async\":false}\n4:I{\"id\":\"3644\",\"name\":\"\",\"chunks\":[\"272:webpack-54cd5478b621d6d8\",\"776:0b7c6ed9-60e4a7f8e855a262\",\"474:474-c8c5eb3e5e298e46\"],\"async\":false}\n6:I{\"id\":\"2070\",\"name\":\"\",\"chunks\":[\"131:131-718a907043a28311\",\"185:app/layout-e83a0904fdc2baed\"],\"async\":false}\n7:I{\"id\":\"7131\",\"name\":\"\",\"chunks\":[\"131:131-718a907043a28311\",\"931:app/page-59d2145bcde12638\"],\"async\":false}\n8:I{"])</script><script>self.__next_f.push([1,"\"id\":\"830\",\"name\":\"\",\"chunks\":[\"272:webpack-54cd5478b621d6d8\",\"776:0b7c6ed9-60e4a7f8e855a262\",\"474:474-c8c5eb3e5e298e46\"],\"async\":false}\n9:I{\"id\":\"2079\",\"name\":\"\",\"chunks\":[\"272:webpack-54cd5478b621d6d8\",\"776:0b7c6ed9-60e4a7f8e855a262\",\"474:474-c8c5eb3e5e298e46\"],\"async\":false}\n"])</script><script>self.__next_f.push([1,"1:[\"$\",\"$L2\",null,{\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/blog/2017-10-03-js-closure\",\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"2017-10-03-js-closure\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"2017-10-03-js-closure\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":\"$L3\",\"globalErrorComponent\":\"$4\",\"notFound\":[\"$@5\",[\"$\",\"html\",null,{\"lang\":\"en\",\"data-theme\":\"retro\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://cdn.jsdelivr.net\"}],[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"type\":\"text/css\",\"href\":\"https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css\"}]]}],[\"$\",\"body\",null,{\"className\":\"flex flex-col items-center h-[100svh]\",\"children\":[[\"$\",\"$L6\",null,{\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-XR7V7MF96T\",\"strategy\":\"afterInteractive\"}],[\"$\",\"$L6\",null,{\"id\":\"google-analytics\",\"strategy\":\"afterInteractive\",\"children\":\"\\n          window.dataLayer = window.dataLayer || [];\\n          function gtag(){window.dataLayer.push(arguments);}\\n          gtag('js', new Date());\\n\\n          gtag('config', 'G-XR7V7MF96T');\\n        \"}],[\"$\",\"div\",null,{\"className\":\"w-full max-w-3xl flex-grow\",\"children\":[[\"$\",\"div\",null,{\"className\":\"navbar\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"$L7\",null,{\"className\":\"p-2 hover:underline md:text-2xl font-bold flex gap-4 items-center\",\"href\":\"/\",\"children\":\"Yozzing Blog\"}]}],[\"$\",\"div\",null,{\"className\":\"flex-none\",\"children\":[\"$\",\"div\",null,{\"className\":\"tabs\",\"children\":[[\"$\",\"$L7\",null,{\"className\":\"tab\",\"href\":\"/engineering\",\"children\":\"Engineering\"}],[\"$\",\"$L7\",null,{\"className\":\"tab\",\"href\":\"/essay\",\"children\":\"Essay\"}],[\"$\",\"a\",null,{\"className\":\"tab\",\"href\":\"https://github.com/ddalpange\",\"children\":[\"$\",\"div\",null,{\"className\":\"avatar\",\"children\":[\"$\",\"div\",null,{\"className\":\"w-8 rounded-full\",\"children\":[\"$\",\"img\",null,{\"alt\":\"yozzing\",\"src\":\"/blog/images/profile.jpeg\"}]}]}]}]]}]}]]}],[\"$\",\"div\",null,{\"className\":\"p-4 pb-10\",\"children\":[\"$undefined\",[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]]}]]}]]}]]}]],\"asNotFound\":false,\"children\":[[\"$\",\"html\",null,{\"lang\":\"en\",\"data-theme\":\"retro\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://cdn.jsdelivr.net\"}],[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"type\":\"text/css\",\"href\":\"https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css\"}]]}],[\"$\",\"body\",null,{\"className\":\"flex flex-col items-center h-[100svh]\",\"children\":[[\"$\",\"$L6\",null,{\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-XR7V7MF96T\",\"strategy\":\"afterInteractive\"}],[\"$\",\"$L6\",null,{\"id\":\"google-analytics\",\"strategy\":\"afterInteractive\",\"children\":\"\\n          window.dataLayer = window.dataLayer || [];\\n          function gtag(){window.dataLayer.push(arguments);}\\n          gtag('js', new Date());\\n\\n          gtag('config', 'G-XR7V7MF96T');\\n        \"}],[\"$\",\"div\",null,{\"className\":\"w-full max-w-3xl flex-grow\",\"children\":[[\"$\",\"div\",null,{\"className\":\"navbar\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"$L7\",null,{\"className\":\"p-2 hover:underline md:text-2xl font-bold flex gap-4 items-center\",\"href\":\"/\",\"children\":\"Yozzing Blog\"}]}],[\"$\",\"div\",null,{\"className\":\"flex-none\",\"children\":[\"$\",\"div\",null,{\"className\":\"tabs\",\"children\":[[\"$\",\"$L7\",null,{\"className\":\"tab\",\"href\":\"/engineering\",\"children\":\"Engineering\"}],[\"$\",\"$L7\",null,{\"className\":\"tab\",\"href\":\"/essay\",\"children\":\"Essay\"}],[\"$\",\"a\",null,{\"className\":\"tab\",\"href\":\"https://github.com/ddalpange\",\"children\":[\"$\",\"div\",null,{\"className\":\"avatar\",\"children\":[\"$\",\"div\",null,{\"className\":\"w-8 rounded-full\",\"children\":[\"$\",\"img\",null,{\"alt\":\"yozzing\",\"src\":\"/blog/images/profile.jpeg\"}]}]}]}]]}]}]]}],[\"$\",\"div\",null,{\"className\":\"p-4 pb-10\",\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",[\"slug\",\"2017-10-03-js-closure\",\"d\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$La\",\"$@b\"],\"segment\":\"__PAGE__?{\\\"slug\\\":\\\"2017-10-03-js-closure\\\"}\"}}],\"segment\":[\"slug\",\"2017-10-03-js-closure\",\"d\"]}}],\"segment\":\"blog\"}}]}]]}]]}]]}],\"$@c\"]}]\n"])</script><script>self.__next_f.push([1,"d:I{\"id\":\"3969\",\"name\":\"Disqus\",\"chunks\":[\"308:app/blog/[slug]/page-a59e512fe2b74578\"],\"async\":false}\n5:[null,null,[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/4640374ce090311f.css\",\"precedence\":\"next.js\"}]]]\n"])</script><script>self.__next_f.push([1,"a:[\"$\",\"article\",null,{\"className\":\"prose max-w-full flex flex-col items-center\",\"children\":[[\"$\",\"span\",null,{\"className\":\"mb-2\",\"children\":\"over 5 years ago\"}],[\"$\",\"h1\",null,{\"children\":\"자바스크립트 클로져\"}],[\"$\",\"div\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"prose self-center\",\"children\":[[\"$\",\"p\",\"0\",{\"children\":\"자바스크립트의 주요 개념중 하나인 클로져에 대해 자세히 알아보자.\"}],\"\\n\",[\"$\",\"p\",\"2\",{\"children\":[\"$\",\"strong\",null,{\"children\":\"클로져\"}]}],\"\\n\",[\"$\",\"p\",\"4\",{\"children\":[\"클로져는 독립적인 (자유) 변수 (지역적으로 사용되지만, 둘러싼 범위 안에서 정의된 변수)를 참조하는 함수들이다.\\n다른 말로 해석하면,\\n이 함수들은 그들이 생성된 환경을 \",[\"$\",\"strong\",\"1\",{\"children\":\"기억\"}],\"한다.\"]}],\"\\n\",[\"$\",\"p\",\"6\",{\"children\":[\"$\",\"strong\",null,{\"children\":\"한가지 의문\"}]}],\"\\n\",[\"$\",\"p\",\"8\",{\"children\":\"클로져는 지역적으로 선언되었지만, 해당 함수가 선언된 블럭 안에 있는 독립된 변수들을 참조할 수 있는 함수라고 하였다.\\n위 문장에서만 보면 자바스크립트의 모든 함수는 해당 블럭의 변수를 참조할 수 있음으로 자바스크립트의 모든 함수는 클로져라 할 수 있다.\\n하지만 과연 자바스크립트의 모든 함수는 클로져일까 ??\"}],\"\\n\",[\"$\",\"pre\",\"10\",{\"children\":[\"$\",\"code\",null,{\"children\":\"function init() {\\n  var name = \\\"Mozilla\\\";\\n  \\n  function displayName() { // displayName()은 내부 함수인, 클로져다\\n    alert(name); // 부모 함수에서 선언된 변수를 사용한다\\n  }\\n\\n  displayName();\\n}\\n\\ninit();\\n\"}]}],\"\\n\",[\"$\",\"p\",\"12\",{\"children\":[[\"$\",\"code\",\"0\",{\"children\":\"displayName\"}],\"은 자신이 선언된 환경을 기억하였다. 그렇다면 \",[\"$\",\"code\",\"2\",{\"children\":\"displayName\"}],\"은 클로져라고 부를 수 있는가 ?\"]}],\"\\n\",[\"$\",\"pre\",\"14\",{\"children\":[\"$\",\"code\",null,{\"children\":\"function makeFunc() {\\n  var name = \\\"Mozilla\\\";\\n\\n  function displayName() {\\n    alert(name);\\n  }\\n\\n  return displayName;\\n}\\n\\nvar myFunc = makeFunc();\\nmyFunc();\\n\"}]}],\"\\n\",[\"$\",\"p\",\"16\",{\"children\":[[\"$\",\"code\",\"0\",{\"children\":\"myFunc\"}],\" 를 실행했을 때 \",[\"$\",\"code\",\"2\",{\"children\":\"makeFunc\"}],\"에 대한 참조가 없음에도 불구하고 \",[\"$\",\"code\",\"4\",{\"children\":\"makeFunc\"}],\"의 지역변수인 \",[\"$\",\"code\",\"6\",{\"children\":\"name\"}],\" 변수에 정상적으로 접근할 수 있다. 이상하지 않은가?\"]}],\"\\n\",[\"$\",\"p\",\"18\",{\"children\":[[\"$\",\"code\",\"0\",{\"children\":\"displayName\"}],\"은 자신이 선언된 스코프에서 벗어나 global 환경에서 초기화되었다.\\n스코프 탐색은 실행스택과는 관련이 없는 \",[\"$\",\"code\",\"2\",{\"children\":\"makeFunc\"}],\"를 거쳐갔으며 \",[\"$\",\"code\",\"4\",{\"children\":\"displayName\"}],\"의 외부 스코프는 global이 아닌 \",[\"$\",\"code\",\"6\",{\"children\":\"makeFunc\"}],\"의 스코프이다.\"]}],\"\\n\",[\"$\",\"p\",\"20\",{\"children\":[[\"$\",\"code\",\"0\",{\"children\":\"myFunc\"}],\"가 글로벌 환경에서 초기화 되더라도 리턴된 \",[\"$\",\"code\",\"2\",{\"children\":\"dispalyName\"}],\"의 스코프체인은 \",[\"$\",\"code\",\"4\",{\"children\":\"displayName\"}],\" -\u003e \",[\"$\",\"code\",\"6\",{\"children\":\"makeFunc\"}],\" -\u003e \",[\"$\",\"code\",\"8\",{\"children\":\"global\"}],\" 순으로 형성된다.\"]}],\"\\n\",[\"$\",\"p\",\"22\",{\"children\":[\"즉 초기화되는 위치와 관계없이 해당 함수가 \",[\"$\",\"strong\",\"1\",{\"children\":\"선언\"}],\"된 곳에서 스코프를 형성한다는 뜻이다.\"]}],\"\\n\",[\"$\",\"p\",\"24\",{\"children\":[[\"$\",\"code\",\"0\",{\"children\":\"myFunc\"}],\"에 null을 할당하지 않으면 가비지콜렉터가 \",[\"$\",\"code\",\"2\",{\"children\":\"makeFunc\"}],\"의 메모리를 해제하지 않기 때문에 클로져를 사용한다면 별도로 꼭 null을 할당해줘야한다.\"]}],\"\\n\",[\"$\",\"pre\",\"26\",{\"children\":[\"$\",\"code\",null,{\"children\":\"function count() {\\n    var i;\\n    for (i = 1; i \u003c 10; i ++) {\\n        setTimeout(function timer() {\\n            console.log(i);\\n        }, i*100);\\n    }\\n}\\ncount();\\n\"}]}],\"\\n\",[\"$\",\"p\",\"28\",{\"children\":[\"1 ~ 10까지 1씩 증가하여 출력하는 코드를 원했지만 결과는 기대와 달리 10이 9번 출력된다.\\n0.1초동안 i는 10이 되었기 때문이며 클로져함수 timer에서 외부 스코프인 \",[\"$\",\"code\",\"1\",{\"children\":\"count\"}],\"의 변수인 \",[\"$\",\"code\",\"3\",{\"children\":\"i\"}],\"에 직접 접근하여 출력하였기 때문이다.\\n해당 코드를 원하는 결과값으로 바꾸기 위해 어떻게 해야할까 ?\"]}],\"\\n\",[\"$\",\"p\",\"30\",{\"children\":[\"$\",\"strong\",null,{\"children\":\"내부 스코프를 하나 더 추가하는 방식.\"}]}],\"\\n\",[\"$\",\"pre\",\"32\",{\"children\":[\"$\",\"code\",null,{\"children\":\"function count() {\\n    var i;\\n    for (i = 1; i \u003c 10; i += 1) {\\n        (function(countingNumber) {\\n            setTimeout(function timer() {\\n                console.log(countingNumber);\\n            }, i * 100);\\n        })(i);\\n    }\\n}\\ncount();\\n\"}]}],\"\\n\",[\"$\",\"p\",\"34\",{\"children\":[\"$\",\"strong\",null,{\"children\":\"블록 스코프를 이용하는 방식\"}]}],\"\\n\",[\"$\",\"pre\",\"36\",{\"children\":[\"$\",\"code\",null,{\"children\":\"function count() {\\n    'use strict';\\n    for (let i = 1; i \u003c 10; i += 1) {\\n        setTimeout(function timer() {\\n            console.log(i);\\n        }, i * 100);\\n    }\\n}\\ncount();\\n\"}]}],\"\\n\",[\"$\",\"p\",\"38\",{\"children\":[[\"$\",\"strong\",\"0\",{\"children\":\"느낀 점\"}],\"\\n클로져는 재미있는 개념이다. 클로져란 개념을 이해하기 위해서 11개 정도의 글을 정독하였는데, 사람마다 이해하는 클로져의 개념이 다 똑같은것 같지는 않다.\\n최대한 다양한 관점에서 클로져를 바라보고 글을 쓸려고 노력하였는데 결국 나랑 비슷한 사람의 글을 거의 베끼다시피 한것 같다.\\n언제나 느끼지만 글쓰기는 참 어렵다.\"]}],\"\\n\",[\"$\",\"p\",\"40\",{\"children\":[\"$\",\"strong\",null,{\"children\":\"참고\"}]}],\"\\n\",[\"$\",\"ol\",\"42\",{\"children\":[\"\\n\",[\"$\",\"li\",\"1\",{\"children\":\"http://blog.javarouka.me/2012/01/javascripts-closure.html\"}],\"\\n\",[\"$\",\"li\",\"3\",{\"children\":\"http://meetup.toast.com/posts/86\"}],\"\\n\",[\"$\",\"li\",\"5\",{\"children\":\"http://unikys.tistory.com/309\"}],\"\\n\"]}],\"\\n\"]}]}],[\"$\",\"$Ld\",null,{\"post\":{\"title\":\"자바스크립트 클로져\",\"date\":\"2017-10-03T22:44:53.000Z\",\"thumbnail\":null,\"categories\":[\"Javascript\"],\"tags\":[\"Javascript\",\"Closure\"],\"toc\":true,\"content\":\"\\n자바스크립트의 주요 개념중 하나인 클로져에 대해 자세히 알아보자.\\n\\n\u003c!-- more --\u003e\\n\\n**클로져**\\n\\n클로져는 독립적인 (자유) 변수 (지역적으로 사용되지만, 둘러싼 범위 안에서 정의된 변수)를 참조하는 함수들이다. \\n다른 말로 해석하면, \\n이 함수들은 그들이 생성된 환경을 **기억**한다.\\n\\n**한가지 의문**\\n\\n클로져는 지역적으로 선언되었지만, 해당 함수가 선언된 블럭 안에 있는 독립된 변수들을 참조할 수 있는 함수라고 하였다. \\n위 문장에서만 보면 자바스크립트의 모든 함수는 해당 블럭의 변수를 참조할 수 있음으로 자바스크립트의 모든 함수는 클로져라 할 수 있다. \\n하지만 과연 자바스크립트의 모든 함수는 클로져일까 ??\\n\\n\\n```javascript\\nfunction init() {\\n  var name = \\\"Mozilla\\\";\\n  \\n  function displayName() { // displayName()은 내부 함수인, 클로져다\\n    alert(name); // 부모 함수에서 선언된 변수를 사용한다\\n  }\\n\\n  displayName();\\n}\\n\\ninit();\\n```\\n`displayName`은 자신이 선언된 환경을 기억하였다. 그렇다면 `displayName`은 클로져라고 부를 수 있는가 ?\\n\\n\\n```javascript\\nfunction makeFunc() {\\n  var name = \\\"Mozilla\\\";\\n\\n  function displayName() {\\n    alert(name);\\n  }\\n\\n  return displayName;\\n}\\n\\nvar myFunc = makeFunc();\\nmyFunc();\\n```\\n`myFunc` 를 실행했을 때 `makeFunc`에 대한 참조가 없음에도 불구하고 `makeFunc`의 지역변수인 `name` 변수에 정상적으로 접근할 수 있다. 이상하지 않은가?\\n\\n`displayName`은 자신이 선언된 스코프에서 벗어나 global 환경에서 초기화되었다.\\n스코프 탐색은 실행스택과는 관련이 없는 `makeFunc`를 거쳐갔으며 `displayName`의 외부 스코프는 global이 아닌 `makeFunc`의 스코프이다. \\n\\n`myFunc`가 글로벌 환경에서 초기화 되더라도 리턴된 `dispalyName`의 스코프체인은 `displayName` -\u003e `makeFunc` -\u003e `global` 순으로 형성된다. \\n\\n즉 초기화되는 위치와 관계없이 해당 함수가 **선언**된 곳에서 스코프를 형성한다는 뜻이다.\\n\\n`myFunc`에 null을 할당하지 않으면 가비지콜렉터가 `makeFunc`의 메모리를 해제하지 않기 때문에 클로져를 사용한다면 별도로 꼭 null을 할당해줘야한다.\\n\\n```javascript\\nfunction count() {\\n    var i;\\n    for (i = 1; i \u003c 10; i ++) {\\n        setTimeout(function timer() {\\n            console.log(i);\\n        }, i*100);\\n    }\\n}\\ncount();\\n```\\n\\n1 ~ 10까지 1씩 증가하여 출력하는 코드를 원했지만 결과는 기대와 달리 10이 9번 출력된다. \\n0.1초동안 i는 10이 되었기 때문이며 클로져함수 timer에서 외부 스코프인 `count`의 변수인 `i`에 직접 접근하여 출력하였기 때문이다. \\n해당 코드를 원하는 결과값으로 바꾸기 위해 어떻게 해야할까 ?\\n\\n**내부 스코프를 하나 더 추가하는 방식.**\\n\\n```javascript\\nfunction count() {\\n    var i;\\n    for (i = 1; i \u003c 10; i += 1) {\\n        (function(countingNumber) {\\n            setTimeout(function timer() {\\n                console.log(countingNumber);\\n            }, i * 100);\\n        })(i);\\n    }\\n}\\ncount();\\n```\\n\\n**블록 스코프를 이용하는 방식**\\n\\n```javascript\\nfunction count() {\\n    'use strict';\\n    for (let i = 1; i \u003c 10; i += 1) {\\n        setTimeout(function timer() {\\n            console.log(i);\\n        }, i * 100);\\n    }\\n}\\ncount();\\n```\\n\\n**느낀 점**\\n클로져는 재미있는 개념이다. 클로져란 개념을 이해하기 위해서 11개 정도의 글을 정독하였는데, 사람마다 이해하는 클로져의 개념이 다 똑같은것 같지는 않다.\\n최대한 다양한 관점에서 클로져를 바라보고 글을 쓸려고 노력하였는데 결국 나랑 비슷한 사람의 글을 거의 베끼다시피 한것 같다.\\n언제나 느끼지만 글쓰기는 참 어렵다.\\n\\n\\n**참고**\\n\\n1. http://blog.javarouka.me/2012/01/javascripts-closure.html\\n2. http://meetup.toast.com/posts/86\\n3. http://unikys.tistory.com/309\\n\u003c!--stackedit_data:\\neyJoaXN0b3J5IjpbMTg1Njg2ODQ5Nl19\\n--\u003e\",\"contentHtml\":\"\u003cp\u003e자바스크립트의 주요 개념중 하나인 클로져에 대해 자세히 알아보자.\u003c/p\u003e\\n\u003cp\u003e\u003cstrong\u003e클로져\u003c/strong\u003e\u003c/p\u003e\\n\u003cp\u003e클로져는 독립적인 (자유) 변수 (지역적으로 사용되지만, 둘러싼 범위 안에서 정의된 변수)를 참조하는 함수들이다.\\n다른 말로 해석하면,\\n이 함수들은 그들이 생성된 환경을 \u003cstrong\u003e기억\u003c/strong\u003e한다.\u003c/p\u003e\\n\u003cp\u003e\u003cstrong\u003e한가지 의문\u003c/strong\u003e\u003c/p\u003e\\n\u003cp\u003e클로져는 지역적으로 선언되었지만, 해당 함수가 선언된 블럭 안에 있는 독립된 변수들을 참조할 수 있는 함수라고 하였다.\\n위 문장에서만 보면 자바스크립트의 모든 함수는 해당 블럭의 변수를 참조할 수 있음으로 자바스크립트의 모든 함수는 클로져라 할 수 있다.\\n하지만 과연 자바스크립트의 모든 함수는 클로져일까 ??\u003c/p\u003e\\n\u003cpre\u003e\u003ccode\u003efunction init() {\\n  var name = \\\"Mozilla\\\";\\n  \\n  function displayName() { // displayName()은 내부 함수인, 클로져다\\n    alert(name); // 부모 함수에서 선언된 변수를 사용한다\\n  }\\n\\n  displayName();\\n}\\n\\ninit();\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e\u003ccode\u003edisplayName\u003c/code\u003e은 자신이 선언된 환경을 기억하였다. 그렇다면 \u003ccode\u003edisplayName\u003c/code\u003e은 클로져라고 부를 수 있는가 ?\u003c/p\u003e\\n\u003cpre\u003e\u003ccode\u003efunction makeFunc() {\\n  var name = \\\"Mozilla\\\";\\n\\n  function displayName() {\\n    alert(name);\\n  }\\n\\n  return displayName;\\n}\\n\\nvar myFunc = makeFunc();\\nmyFunc();\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e\u003ccode\u003emyFunc\u003c/code\u003e 를 실행했을 때 \u003ccode\u003emakeFunc\u003c/code\u003e에 대한 참조가 없음에도 불구하고 \u003ccode\u003emakeFunc\u003c/code\u003e의 지역변수인 \u003ccode\u003ename\u003c/code\u003e 변수에 정상적으로 접근할 수 있다. 이상하지 않은가?\u003c/p\u003e\\n\u003cp\u003e\u003ccode\u003edisplayName\u003c/code\u003e은 자신이 선언된 스코프에서 벗어나 global 환경에서 초기화되었다.\\n스코프 탐색은 실행스택과는 관련이 없는 \u003ccode\u003emakeFunc\u003c/code\u003e를 거쳐갔으며 \u003ccode\u003edisplayName\u003c/code\u003e의 외부 스코프는 global이 아닌 \u003ccode\u003emakeFunc\u003c/code\u003e의 스코프이다.\u003c/p\u003e\\n\u003cp\u003e\u003ccode\u003emyFunc\u003c/code\u003e가 글로벌 환경에서 초기화 되더라도 리턴된 \u003ccode\u003edispalyName\u003c/code\u003e의 스코프체인은 \u003ccode\u003edisplayName\u003c/code\u003e -\u003e \u003ccode\u003emakeFunc\u003c/code\u003e -\u003e \u003ccode\u003eglobal\u003c/code\u003e 순으로 형성된다.\u003c/p\u003e\\n\u003cp\u003e즉 초기화되는 위치와 관계없이 해당 함수가 \u003cstrong\u003e선언\u003c/strong\u003e된 곳에서 스코프를 형성한다는 뜻이다.\u003c/p\u003e\\n\u003cp\u003e\u003ccode\u003emyFunc\u003c/code\u003e에 null을 할당하지 않으면 가비지콜렉터가 \u003ccode\u003emakeFunc\u003c/code\u003e의 메모리를 해제하지 않기 때문에 클로져를 사용한다면 별도로 꼭 null을 할당해줘야한다.\u003c/p\u003e\\n\u003cpre\u003e\u003ccode\u003efunction count() {\\n    var i;\\n    for (i = 1; i \u0026#x3C; 10; i ++) {\\n        setTimeout(function timer() {\\n            console.log(i);\\n        }, i*100);\\n    }\\n}\\ncount();\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e1 ~ 10까지 1씩 증가하여 출력하는 코드를 원했지만 결과는 기대와 달리 10이 9번 출력된다.\\n0.1초동안 i는 10이 되었기 때문이며 클로져함수 timer에서 외부 스코프인 \u003ccode\u003ecount\u003c/code\u003e의 변수인 \u003ccode\u003ei\u003c/code\u003e에 직접 접근하여 출력하였기 때문이다.\\n해당 코드를 원하는 결과값으로 바꾸기 위해 어떻게 해야할까 ?\u003c/p\u003e\\n\u003cp\u003e\u003cstrong\u003e내부 스코프를 하나 더 추가하는 방식.\u003c/strong\u003e\u003c/p\u003e\\n\u003cpre\u003e\u003ccode\u003efunction count() {\\n    var i;\\n    for (i = 1; i \u0026#x3C; 10; i += 1) {\\n        (function(countingNumber) {\\n            setTimeout(function timer() {\\n                console.log(countingNumber);\\n            }, i * 100);\\n        })(i);\\n    }\\n}\\ncount();\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e\u003cstrong\u003e블록 스코프를 이용하는 방식\u003c/strong\u003e\u003c/p\u003e\\n\u003cpre\u003e\u003ccode\u003efunction count() {\\n    'use strict';\\n    for (let i = 1; i \u0026#x3C; 10; i += 1) {\\n        setTimeout(function timer() {\\n            console.log(i);\\n        }, i * 100);\\n    }\\n}\\ncount();\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e\u003cstrong\u003e느낀 점\u003c/strong\u003e\\n클로져는 재미있는 개념이다. 클로져란 개념을 이해하기 위해서 11개 정도의 글을 정독하였는데, 사람마다 이해하는 클로져의 개념이 다 똑같은것 같지는 않다.\\n최대한 다양한 관점에서 클로져를 바라보고 글을 쓸려고 노력하였는데 결국 나랑 비슷한 사람의 글을 거의 베끼다시피 한것 같다.\\n언제나 느끼지만 글쓰기는 참 어렵다.\u003c/p\u003e\\n\u003cp\u003e\u003cstrong\u003e참고\u003c/strong\u003e\u003c/p\u003e\\n\u003col\u003e\\n\u003cli\u003ehttp://blog.javarouka.me/2012/01/javascripts-closure.html\u003c/li\u003e\\n\u003cli\u003ehttp://meetup.toast.com/posts/86\u003c/li\u003e\\n\u003cli\u003ehttp://unikys.tistory.com/309\u003c/li\u003e\\n\u003c/ol\u003e\\n\",\"summary\":\"\u003cp\u003e자바스크립트의 주요 개념중 하나인 클로져에 대해 자세히 알아보자.\u003c/p\u003e\\n\",\"slug\":\"2017-10-03-js-closure\",\"link\":\"/blog/2017-10-03-js-closure\"}}]]}]\n"])</script><script>self.__next_f.push([1,"b:[null,null,[]]\nc:[null,null,[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/4640374ce090311f.css\",\"precedence\":\"next.js\"}]]]\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],[\"$\",\"title\",null,{\"children\":\"자바스크립트 클로져\"}],[\"$\",\"meta\",null,{\"name\":\"description\",\"content\":\"\u003cp\u003e자바스크립트의 주요 개념중 하나인 클로져에 대해 자세히 알아보자.\u003c/p\u003e\\n\"}],null,[[[\"$\",\"link\",null,{\"rel\":\"author\",\"href\":\"https://github.io/ddalpange\"}],[\"$\",\"meta\",null,{\"name\":\"author\",\"content\":\"ddalpange\"}]]],null,null,[\"$\",\"meta\",null,{\"name\":\"keywords\",\"content\":\"Javascript,Closure\"}],null,null,null,[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,null,null,null,[null,[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"any\"}]],[],null]]\n"])</script>