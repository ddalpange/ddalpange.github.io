<!DOCTYPE html><html lang="en" data-theme="retro"><head><meta charSet="utf-8"/><link rel="stylesheet" href="/_next/static/css/d71785f3ad35c274.css" data-precedence="next.js"/><link rel="preload" as="style" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css"/><link rel="preload" as="script" href="https://www.googletagmanager.com/gtag/js?id=G-XR7V7MF96T"/><title>자바스크립트 객체 복사하기</title><meta name="description" content="&lt;h4&gt;시작하기 전에&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;A코드&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;let a = 1;
let b = a;
b = 2;
console.log(a, b);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;B코드&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;let a = { p : 1 };
let b = a;
b.p = 2;
console.log(a.p, b.p);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A코드와 B코드 두가지의 코드가 있다.
두 코드 모두 &lt;code&gt;b에 a를 대입하였다.&lt;/code&gt;라고 생각하는가?
혹은
두 코드 모두 &lt;code&gt;b에 a를 복사하였다&lt;/code&gt;라고 생각하는가?&lt;/p&gt;
"/><link rel="author" href="https://github.io/ddalpange"/><meta name="author" content="ddalpange"/><meta name="keywords" content="Javascript,DeepCopy,ShallowCopy"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="any"/><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" nomodule=""></script></head><body class="flex flex-col items-center h-[100svh]"><div class="w-full max-w-3xl flex-grow"><div class="navbar bg-base-100"><div class="flex-1"><a class="p-2 hover:underline md:text-2xl font-bold flex gap-4 items-center" href="/">Yozzing Blog</a></div><div class="flex-none"><div class="tabs"><a class="tab" href="/engineering">엔지니어링</a><a class="tab" href="/essay">에세이</a><a class="tab" href="https://github.com/ddalpange"><div class="avatar"><div class="w-8 rounded-full"><img src="/blog/images/profile.jpeg"/></div></div></a></div></div></div><div class="p-4 pb-10"><article class="prose"><h1>자바스크립트 객체 복사하기</h1><caption>2017/10/10</caption><div><h4>시작하기 전에</h4>
<p><strong>A코드</strong></p>
<pre><code>let a = 1;
let b = a;
b = 2;
console.log(a, b);
</code></pre>
<p><strong>B코드</strong></p>
<pre><code>let a = { p : 1 };
let b = a;
b.p = 2;
console.log(a.p, b.p);
</code></pre>
<p>A코드와 B코드 두가지의 코드가 있다.
두 코드 모두 <code>b에 a를 대입하였다.</code>라고 생각하는가?
혹은
두 코드 모두 <code>b에 a를 복사하였다</code>라고 생각하는가?</p>
<p>결론부터 말하자면 <strong>틀렸다</strong>.
자바스크립트는 불변형의 데이터를 선언할 때 포인터와 값 모두 생성하지만,
오브젝트(배열)을 생성할 때에는 메모리 절약을 위해 포인터만 새로 할당할 뿐이다.</p>
<p>즉 A코드에서는 <code>b에 a를 복사하였다.</code>가 맞는것이고
B코드에서는 <code>b에 a를 대입하였다.</code>가 맞는 해석이 된다.
이제 B코드에서 <code>b에 a를 복사하였다</code>가 성립하도록 해보자.</p>
<h4>1. <a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/assign">Object.assign()</a>을 이용</h4>
<pre><code>function cloneObject(obj) {
  return Object.assign({}, obj);
}
</code></pre>
<p><strong>Object.assign</strong>은 첫번째 인자로 들어오는 객체에 두번째 인자로 들어오는 객체의 프로퍼티들을 차례대로 덮어쓰기하여 반환하는 메소드이다.
여기서 주의할 점은 <strong>Object.assign</strong>은 프로퍼티들에 대한 참조를 덮어쓰기하기 때문에, 오브젝트 안에 오브젝트 또는 배열이 있을 경우 복사가 아닌 참조를 하게된다.
즉 객체를 <code>얕은 복사(Shallow Copy)</code>한다.</p>
<h4>2. JSON 객체의 메소드를 이용</h4>
<pre><code>function cloneObject(obj) {
  return JSON.parse(JSON.stringify(obj));
}
</code></pre>
<p><strong>JSON.stringify</strong>는 자바스크립트 오브젝트를 스트링 포멧으로 변환하는 메소드이다.
<strong>JSON.parse</strong>는 스트링 포멧을 자바스크립트 오브젝트로 변환하는 메소드이다.</p>
<p>스트링으로 변환하였다가 다시 오브젝트로 변환하기 때문에 이전 객체에 대한 참조가 없어지지만 JSON 메소드 자체가 성능면에서 다른 방법에 비해 굉장히 느리기 때문에 주의해야한다.
이 방법은 객체를 <code>깊은 복사(Deep Copy)</code>한다.</p>
<h4>3. 자바스크립트 재귀 사용</h4>
<pre><code>function cloneObject(obj) {
    var clone = {};
    for(var i in obj) {
        if(typeof(obj[i])=="object" &#x26;&#x26; obj[i] != null)
            clone[i] = cloneObject(obj[i]);
        else
            clone[i] = obj[i];
    }
    return clone;
}
</code></pre>
<p>오브젝트의 프로퍼티들을 순회하여 빈 오브젝트에 더한다. 그 과정에서 원본 오브젝트의 프로퍼티가 오브젝트일 경우 재귀적으로 함수를 실행한다.
이 방법은 객체를 <code>깊은 복사(Deep Copy)</code>한다.</p>
<h4>4. <a href="https://facebook.github.io/immutable-js/">Immutable.js</a> 사용</h4>
<pre><code>import { Map } from 'immutable';

let map = Map({a : 1});
let newMap = map;
newMap.set('a', 2);
console.log(map.get('a'));
console.log(newMap.get('a'));
</code></pre>
<p>페이스북에서 만든 오픈소스 라이브러리이다.
Immutable을 쓰게된다면 Array, Map 모두 이뮤터블하게 쓸 수 있게된다.
객체의 내부 값을 변경해도 원본 객체의 값은 변화하지 않고 새로운 객체를 배출한다는 뜻이다.
사용법이 비교적 간편하지만 처음 보는 사람일 경우 적응하는데 어려움이 있을 수 있다.</p>
<blockquote>
<p>여담이지만 이 라이브러리를 사용할 때 로그를 찍을려면 <strong>toJS</strong>메소드를 사용하여 순수 자바스크립트 객체로 변환해야하는데 매번 까먹어서 불편했다 :(</p>
</blockquote>
<h4>정리하며</h4>
<p>사실 유지보수나 신규개발을 하면서 객체의 딥카피가 필요한 경우는 많이 없었다.
대부분 스왈로카피로 해결할 수 있으며 딥카피는 피하는것이 더 빠르고 직관적이기 때문이다.</p>
<p>주의할 점은 단순히 <code>=</code>를 통해 변수를 대입하는것과  <code>얕은 복사</code>는 엄연히 다르다는 것이다.
<code>=</code>와 <code>얕은 복사</code>와 <code>깊은 복사</code>의 차이만 알아가도 성공한것이 아닐까 ?
이것을 모르는 개발자들이 적지 않아서 조금 놀랐다.</p>
</div></article></div></div><script src="/_next/static/chunks/webpack-1b75aaef18416899.js" async=""></script><script src="/_next/static/chunks/0b7c6ed9-5895ea2b955a8219.js" async=""></script><script src="/_next/static/chunks/474-2bfbc4a0bef14471.js" async=""></script><script src="/_next/static/chunks/main-app-658fb0ddf7baceee.js" async=""></script></body></html><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"0:\"$L1\"\n"])</script><script>self.__next_f.push([1,"2:I{\"id\":\"9638\",\"name\":\"\",\"chunks\":[\"272:webpack-1b75aaef18416899\",\"776:0b7c6ed9-5895ea2b955a8219\",\"474:474-2bfbc4a0bef14471\"],\"async\":false}\n4:I{\"id\":\"3644\",\"name\":\"\",\"chunks\":[\"272:webpack-1b75aaef18416899\",\"776:0b7c6ed9-5895ea2b955a8219\",\"474:474-2bfbc4a0bef14471\"],\"async\":false}\n6:I{\"id\":\"2070\",\"name\":\"\",\"chunks\":[\"131:131-b649a46ff1b8d8bb\",\"185:app/layout-77153d09ec71e1b8\"],\"async\":false}\n7:I{\"id\":\"7131\",\"name\":\"\",\"chunks\":[\"131:131-b649a46ff1b8d8bb\",\"931:app/page-d55a3db7a3ed8315\"],\"async\":false}\n8:I{"])</script><script>self.__next_f.push([1,"\"id\":\"830\",\"name\":\"\",\"chunks\":[\"272:webpack-1b75aaef18416899\",\"776:0b7c6ed9-5895ea2b955a8219\",\"474:474-2bfbc4a0bef14471\"],\"async\":false}\n9:I{\"id\":\"2079\",\"name\":\"\",\"chunks\":[\"272:webpack-1b75aaef18416899\",\"776:0b7c6ed9-5895ea2b955a8219\",\"474:474-2bfbc4a0bef14471\"],\"async\":false}\n"])</script><script>self.__next_f.push([1,"1:[\"$\",\"$L2\",null,{\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/blog/2017-10-10-js-clone-object\",\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"2017-10-10-js-clone-object\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"2017-10-10-js-clone-object\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":\"$L3\",\"globalErrorComponent\":\"$4\",\"notFound\":[\"$@5\",[\"$\",\"html\",null,{\"lang\":\"en\",\"data-theme\":\"retro\",\"children\":[[\"$\",\"head\",null,{\"children\":[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"type\":\"text/css\",\"href\":\"https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css\"}]}],[\"$\",\"body\",null,{\"className\":\"flex flex-col items-center h-[100svh]\",\"children\":[[\"$\",\"$L6\",null,{\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-XR7V7MF96T\",\"strategy\":\"afterInteractive\"}],[\"$\",\"$L6\",null,{\"id\":\"google-analytics\",\"strategy\":\"afterInteractive\",\"children\":\"\\n          window.dataLayer = window.dataLayer || [];\\n          function gtag(){window.dataLayer.push(arguments);}\\n          gtag('js', new Date());\\n\\n          gtag('config', 'G-XR7V7MF96T');\\n        \"}],[\"$\",\"div\",null,{\"className\":\"w-full max-w-3xl flex-grow\",\"children\":[[\"$\",\"div\",null,{\"className\":\"navbar bg-base-100\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"$L7\",null,{\"className\":\"p-2 hover:underline md:text-2xl font-bold flex gap-4 items-center\",\"href\":\"/\",\"children\":\"Yozzing Blog\"}]}],[\"$\",\"div\",null,{\"className\":\"flex-none\",\"children\":[\"$\",\"div\",null,{\"className\":\"tabs\",\"children\":[[\"$\",\"$L7\",null,{\"className\":\"tab\",\"href\":\"/engineering\",\"children\":\"엔지니어링\"}],[\"$\",\"$L7\",null,{\"className\":\"tab\",\"href\":\"/essay\",\"children\":\"에세이\"}],[\"$\",\"a\",null,{\"className\":\"tab\",\"href\":\"https://github.com/ddalpange\",\"children\":[\"$\",\"div\",null,{\"className\":\"avatar\",\"children\":[\"$\",\"div\",null,{\"className\":\"w-8 rounded-full\",\"children\":[\"$\",\"img\",null,{\"src\":\"/blog/images/profile.jpeg\"}]}]}]}]]}]}]]}],[\"$\",\"div\",null,{\"className\":\"p-4 pb-10\",\"children\":[\"$undefined\",[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]]}]]}]]}]]}]],\"asNotFound\":false,\"children\":[[\"$\",\"html\",null,{\"lang\":\"en\",\"data-theme\":\"retro\",\"children\":[[\"$\",\"head\",null,{\"children\":[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"type\":\"text/css\",\"href\":\"https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css\"}]}],[\"$\",\"body\",null,{\"className\":\"flex flex-col items-center h-[100svh]\",\"children\":[[\"$\",\"$L6\",null,{\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-XR7V7MF96T\",\"strategy\":\"afterInteractive\"}],[\"$\",\"$L6\",null,{\"id\":\"google-analytics\",\"strategy\":\"afterInteractive\",\"children\":\"\\n          window.dataLayer = window.dataLayer || [];\\n          function gtag(){window.dataLayer.push(arguments);}\\n          gtag('js', new Date());\\n\\n          gtag('config', 'G-XR7V7MF96T');\\n        \"}],[\"$\",\"div\",null,{\"className\":\"w-full max-w-3xl flex-grow\",\"children\":[[\"$\",\"div\",null,{\"className\":\"navbar bg-base-100\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"$L7\",null,{\"className\":\"p-2 hover:underline md:text-2xl font-bold flex gap-4 items-center\",\"href\":\"/\",\"children\":\"Yozzing Blog\"}]}],[\"$\",\"div\",null,{\"className\":\"flex-none\",\"children\":[\"$\",\"div\",null,{\"className\":\"tabs\",\"children\":[[\"$\",\"$L7\",null,{\"className\":\"tab\",\"href\":\"/engineering\",\"children\":\"엔지니어링\"}],[\"$\",\"$L7\",null,{\"className\":\"tab\",\"href\":\"/essay\",\"children\":\"에세이\"}],[\"$\",\"a\",null,{\"className\":\"tab\",\"href\":\"https://github.com/ddalpange\",\"children\":[\"$\",\"div\",null,{\"className\":\"avatar\",\"children\":[\"$\",\"div\",null,{\"className\":\"w-8 rounded-full\",\"children\":[\"$\",\"img\",null,{\"src\":\"/blog/images/profile.jpeg\"}]}]}]}]]}]}]]}],[\"$\",\"div\",null,{\"className\":\"p-4 pb-10\",\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",[\"slug\",\"2017-10-10-js-clone-object\",\"d\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$La\",\"$@b\"],\"segment\":\"__PAGE__?{\\\"slug\\\":\\\"2017-10-10-js-clone-object\\\"}\"}}],\"segment\":[\"slug\",\"2017-10-10-js-clone-object\",\"d\"]}}],\"segment\":\"blog\"}}]}]]}]]}]]}],\"$@c\"]}]\n"])</script><script>self.__next_f.push([1,"5:[null,null,[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d71785f3ad35c274.css\",\"precedence\":\"next.js\"}]]]\n"])</script><script>self.__next_f.push([1,"a:[\"$\",\"article\",null,{\"className\":\"prose\",\"children\":[[\"$\",\"h1\",null,{\"children\":\"자바스크립트 객체 복사하기\"}],[\"$\",\"caption\",null,{\"children\":\"2017/10/10\"}],[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ch4\u003e시작하기 전에\u003c/h4\u003e\\n\u003cp\u003e\u003cstrong\u003eA코드\u003c/strong\u003e\u003c/p\u003e\\n\u003cpre\u003e\u003ccode\u003elet a = 1;\\nlet b = a;\\nb = 2;\\nconsole.log(a, b);\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e\u003cstrong\u003eB코드\u003c/strong\u003e\u003c/p\u003e\\n\u003cpre\u003e\u003ccode\u003elet a = { p : 1 };\\nlet b = a;\\nb.p = 2;\\nconsole.log(a.p, b.p);\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003eA코드와 B코드 두가지의 코드가 있다.\\n두 코드 모두 \u003ccode\u003eb에 a를 대입하였다.\u003c/code\u003e라고 생각하는가?\\n혹은\\n두 코드 모두 \u003ccode\u003eb에 a를 복사하였다\u003c/code\u003e라고 생각하는가?\u003c/p\u003e\\n\u003cp\u003e결론부터 말하자면 \u003cstrong\u003e틀렸다\u003c/strong\u003e.\\n자바스크립트는 불변형의 데이터를 선언할 때 포인터와 값 모두 생성하지만,\\n오브젝트(배열)을 생성할 때에는 메모리 절약을 위해 포인터만 새로 할당할 뿐이다.\u003c/p\u003e\\n\u003cp\u003e즉 A코드에서는 \u003ccode\u003eb에 a를 복사하였다.\u003c/code\u003e가 맞는것이고\\nB코드에서는 \u003ccode\u003eb에 a를 대입하였다.\u003c/code\u003e가 맞는 해석이 된다.\\n이제 B코드에서 \u003ccode\u003eb에 a를 복사하였다\u003c/code\u003e가 성립하도록 해보자.\u003c/p\u003e\\n\u003ch4\u003e1. \u003ca href=\\\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\\\"\u003eObject.assign()\u003c/a\u003e을 이용\u003c/h4\u003e\\n\u003cpre\u003e\u003ccode\u003efunction cloneObject(obj) {\\n  return Object.assign({}, obj);\\n}\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e\u003cstrong\u003eObject.assign\u003c/strong\u003e은 첫번째 인자로 들어오는 객체에 두번째 인자로 들어오는 객체의 프로퍼티들을 차례대로 덮어쓰기하여 반환하는 메소드이다.\\n여기서 주의할 점은 \u003cstrong\u003eObject.assign\u003c/strong\u003e은 프로퍼티들에 대한 참조를 덮어쓰기하기 때문에, 오브젝트 안에 오브젝트 또는 배열이 있을 경우 복사가 아닌 참조를 하게된다.\\n즉 객체를 \u003ccode\u003e얕은 복사(Shallow Copy)\u003c/code\u003e한다.\u003c/p\u003e\\n\u003ch4\u003e2. JSON 객체의 메소드를 이용\u003c/h4\u003e\\n\u003cpre\u003e\u003ccode\u003efunction cloneObject(obj) {\\n  return JSON.parse(JSON.stringify(obj));\\n}\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e\u003cstrong\u003eJSON.stringify\u003c/strong\u003e는 자바스크립트 오브젝트를 스트링 포멧으로 변환하는 메소드이다.\\n\u003cstrong\u003eJSON.parse\u003c/strong\u003e는 스트링 포멧을 자바스크립트 오브젝트로 변환하는 메소드이다.\u003c/p\u003e\\n\u003cp\u003e스트링으로 변환하였다가 다시 오브젝트로 변환하기 때문에 이전 객체에 대한 참조가 없어지지만 JSON 메소드 자체가 성능면에서 다른 방법에 비해 굉장히 느리기 때문에 주의해야한다.\\n이 방법은 객체를 \u003ccode\u003e깊은 복사(Deep Copy)\u003c/code\u003e한다.\u003c/p\u003e\\n\u003ch4\u003e3. 자바스크립트 재귀 사용\u003c/h4\u003e\\n\u003cpre\u003e\u003ccode\u003efunction cloneObject(obj) {\\n    var clone = {};\\n    for(var i in obj) {\\n        if(typeof(obj[i])==\\\"object\\\" \u0026#x26;\u0026#x26; obj[i] != null)\\n            clone[i] = cloneObject(obj[i]);\\n        else\\n            clone[i] = obj[i];\\n    }\\n    return clone;\\n}\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e오브젝트의 프로퍼티들을 순회하여 빈 오브젝트에 더한다. 그 과정에서 원본 오브젝트의 프로퍼티가 오브젝트일 경우 재귀적으로 함수를 실행한다.\\n이 방법은 객체를 \u003ccode\u003e깊은 복사(Deep Copy)\u003c/code\u003e한다.\u003c/p\u003e\\n\u003ch4\u003e4. \u003ca href=\\\"https://facebook.github.io/immutable-js/\\\"\u003eImmutable.js\u003c/a\u003e 사용\u003c/h4\u003e\\n\u003cpre\u003e\u003ccode\u003eimport { Map } from 'immutable';\\n\\nlet map = Map({a : 1});\\nlet newMap = map;\\nnewMap.set('a', 2);\\nconsole.log(map.get('a'));\\nconsole.log(newMap.get('a'));\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e페이스북에서 만든 오픈소스 라이브러리이다.\\nImmutable을 쓰게된다면 Array, Map 모두 이뮤터블하게 쓸 수 있게된다.\\n객체의 내부 값을 변경해도 원본 객체의 값은 변화하지 않고 새로운 객체를 배출한다는 뜻이다.\\n사용법이 비교적 간편하지만 처음 보는 사람일 경우 적응하는데 어려움이 있을 수 있다.\u003c/p\u003e\\n\u003cblockquote\u003e\\n\u003cp\u003e여담이지만 이 라이브러리를 사용할 때 로그를 찍을려면 \u003cstrong\u003etoJS\u003c/strong\u003e메소드를 사용하여 순수 자바스크립트 객체로 변환해야하는데 매번 까먹어서 불편했다 :(\u003c/p\u003e\\n\u003c/blockquote\u003e\\n\u003ch4\u003e정리하며\u003c/h4\u003e\\n\u003cp\u003e사실 유지보수나 신규개발을 하면서 객체의 딥카피가 필요한 경우는 많이 없었다.\\n대부분 스왈로카피로 해결할 수 있으며 딥카피는 피하는것이 더 빠르고 직관적이기 때문이다.\u003c/p\u003e\\n\u003cp\u003e주의할 점은 단순히 \u003ccode\u003e=\u003c/code\u003e를 통해 변수를 대입하는것과  \u003ccode\u003e얕은 복사\u003c/code\u003e는 엄연히 다르다는 것이다.\\n\u003ccode\u003e=\u003c/code\u003e와 \u003ccode\u003e얕은 복사\u003c/code\u003e와 \u003ccode\u003e깊은 복사\u003c/code\u003e의 차이만 알아가도 성공한것이 아닐까 ?\\n이것을 모르는 개발자들이 적지 않아서 조금 놀랐다.\u003c/p\u003e\\n\"}}]]}]\n"])</script><script>self.__next_f.push([1,"b:[null,null,[]]\nc:[null,null,[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d71785f3ad35c274.css\",\"precedence\":\"next.js\"}]]]\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],[\"$\",\"title\",null,{\"children\":\"자바스크립트 객체 복사하기\"}],[\"$\",\"meta\",null,{\"name\":\"description\",\"content\":\"\u003ch4\u003e시작하기 전에\u003c/h4\u003e\\n\u003cp\u003e\u003cstrong\u003eA코드\u003c/strong\u003e\u003c/p\u003e\\n\u003cpre\u003e\u003ccode\u003elet a = 1;\\nlet b = a;\\nb = 2;\\nconsole.log(a, b);\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e\u003cstrong\u003eB코드\u003c/strong\u003e\u003c/p\u003e\\n\u003cpre\u003e\u003ccode\u003elet a = { p : 1 };\\nlet b = a;\\nb.p = 2;\\nconsole.log(a.p, b.p);\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003eA코드와 B코드 두가지의 코드가 있다.\\n두 코드 모두 \u003ccode\u003eb에 a를 대입하였다.\u003c/code\u003e라고 생각하는가?\\n혹은\\n두 코드 모두 \u003ccode\u003eb에 a를 복사하였다\u003c/code\u003e라고 생각하는가?\u003c/p\u003e\\n\"}],null,[[[\"$\",\"link\",null,{\"rel\":\"author\",\"href\":\"https://github.io/ddalpange\"}],[\"$\",\"meta\",null,{\"name\":\"author\",\"content\":\"ddalpange\"}]]],null,null,[\"$\",\"meta\",null,{\"name\":\"keywords\",\"content\":\"Javascript,DeepCopy,ShallowCopy\"}],null,null,null,[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,null,null,null,[null,[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"any\"}]],[],null]]\n"])</script>