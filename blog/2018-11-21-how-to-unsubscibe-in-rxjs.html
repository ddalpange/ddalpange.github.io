<!DOCTYPE html><html lang="en" data-theme="retro"><head><meta charSet="utf-8"/><link rel="stylesheet" href="/_next/static/css/6aab0c2b0a3a27f2.css" data-precedence="next.js"/><link rel="preload" as="script" href="https://www.googletagmanager.com/gtag/js?id=G-XR7V7MF96T"/><title>Rxjs 구독을 취소하는 여러가지 방법</title><meta name="description" content="&lt;p&gt;&lt;strong&gt;Angular&lt;/strong&gt;는 기본적으로 &lt;strong&gt;RxJS&lt;/strong&gt;를 사용합니다. &lt;strong&gt;RxJS&lt;/strong&gt;를 사용할때 스트림을 연 컴포넌트가 없어진다 해도 열린 스트림은 닫히지 않기 때문에 메모리를 계속 먹습니다. 그렇기 때문에 &lt;strong&gt;Unsubscribe&lt;/strong&gt;를 호출하여 스트림을 닫아주어야하는데요. 매번 &lt;strong&gt;Unsubscribe&lt;/strong&gt;를 하기는 너무나 귀찮음으로 스트림 구독을 해제할 수 있는 다양한 방법을 소개합니다.
참고로 &lt;strong&gt;HttpClient&lt;/strong&gt;, &lt;strong&gt;Router&lt;/strong&gt; 등 앵귤러 내부에서 제공하는 기능들은 따로 &lt;strong&gt;Unsubscribe&lt;/strong&gt;를 하지 않아도 자동으로 구독을 해제합니다.&lt;/p&gt;
"/><link rel="author" href="https://github.io/ddalpange"/><meta name="author" content="ddalpange"/><meta name="keywords" content="RxJS,Unsubscribe,Stream,Event"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="any"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" nomodule=""></script></head><body class="flex flex-col items-center h-[100svh]"><div class="w-full max-w-3xl flex-grow"><div class="navbar bg-base-100"><div class="flex-1"><a class="p-2 hover:underline md:text-2xl font-bold flex gap-4 items-center" href="/">Yozzing Blog</a></div><div class="flex-none"><div class="tabs"><a class="tab" href="/engineering">엔지니어링</a><a class="tab" href="/essay">에세이</a><a class="tab" href="https://github.com/ddalpange"><div class="avatar"><div class="w-8 rounded-full"><img src="/blog/images/profile.jpeg"/></div></div></a></div></div></div><div class="p-4 pb-10"><article class="prose"><h1>Rxjs 구독을 취소하는 여러가지 방법</h1><caption>2018/11/21</caption><div><p><strong>Angular</strong>는 기본적으로 <strong>RxJS</strong>를 사용합니다. <strong>RxJS</strong>를 사용할때 스트림을 연 컴포넌트가 없어진다 해도 열린 스트림은 닫히지 않기 때문에 메모리를 계속 먹습니다. 그렇기 때문에 <strong>Unsubscribe</strong>를 호출하여 스트림을 닫아주어야하는데요. 매번 <strong>Unsubscribe</strong>를 하기는 너무나 귀찮음으로 스트림 구독을 해제할 수 있는 다양한 방법을 소개합니다.
참고로 <strong>HttpClient</strong>, <strong>Router</strong> 등 앵귤러 내부에서 제공하는 기능들은 따로 <strong>Unsubscribe</strong>를 하지 않아도 자동으로 구독을 해제합니다.</p>
<h2>Async Pipe</h2>
<pre><code>export class SomeComponent implements OnInit {
  list$: Observable&#x3C;Item[]>
  ngOnInit(): void {
    this.list$ = this.api.getList()
  }
}
</code></pre>
<pre><code>&#x3C;ng-container *ngIf="list$ | async as list; else loadingTemplate">
  &#x3C;app-table [list]="list" [keys]="keys">&#x3C;/app-table>
&#x3C;/ng-container>
</code></pre>
<p><strong>Angular</strong> 에서 제공하는 <strong>Async</strong> pipe를 사용하는 방법입니다.
<strong>Async</strong> pipe가 알아서 Observable을 구독하고 해지하기 때문에 사용자는 별도로 신경써줄 필요가 없죠. 다만 이 방법은 두가지의 문제가 있습니다.</p>
<pre><code>export class SomeComponent implements OnInit {
  list$: Observable&#x3C;Item[]>
  ngOnInit(): void {
    this.list$ = this.api.getList().pipe(tap(list => console.log(list)))
  }
}
</code></pre>
<p>첫번째로 스크립트내에서 데이터를 쓰기가 귀찮습니다. html에서 event를 통해서 받거나, 아니면 tap operator를 이용해 후킹하여 데이터를 저장해야합니다.</p>
<pre><code>&#x3C;section>
  &#x3C;ng-container *ngIf="list$ | async as list; else loadingTemplate">
    &#x3C;app-table [list]="list" [keys]="keys">&#x3C;/app-table>
  &#x3C;/ng-container>
&#x3C;/section>
&#x3C;footer class="another">
  &#x3C;!-- Error -->
  &#x3C;pre [innerHTML]="list | json">&#x3C;/pre>
&#x3C;/footer>
</code></pre>
<p>list를 선언한 안쪽이 아닌 바깥쪽에서는 list에 접근할 수가 없습니다.
async pipe를 여러번 사용하면 api 요청도 여러번 날라가기 때문에 미리 마크업 구조를 잡고 가야합니다.</p>
<h2>TakeUntill</h2>
<pre><code>export class SomeComponent implements OnInit, OnDestroy {
  list: Item[]
  list$: Observable&#x3C;Item[]>
  private unsubscribe$ = new Subject()
  ngOnInit(): void {
    this.list$ = this.api
      .getList()
      .pipe(takeUntill(this.unsubscribe$))
      .subscribe(list => {
        this.list = list
      })
  }
  ngOnDestroy(): void {
    this.unsubscribe$.next()
    this.unsubscribe$.complete()
  }
}
</code></pre>
<p>인자로 넣어준 Observable (Subject)가 값을 방출하거나 종료할 경우 구독을 해제합니다.</p>
<h2>TakeWhile</h2>
<pre><code>export class SomeComponent implements OnInit, OnDestroy {
  list: Item[]
  list$: Observable&#x3C;Item[]>
  private subscribing = true
  ngOnInit(): void {
    this.list$ = this.api
      .getList()
      .pipe(takeWhile(this.subscribing))
      .subscribe(list => {
        this.list = list
      })
  }
  ngOnDestroy(): void {
    this.subscribing = false
  }
}
</code></pre>
<p>인자로 넣어준 Boolean 값이 false일 경우 구독이 일어나지 않습니다.</p>
<h2>Take</h2>
<pre><code>export class SomeComponent implements OnInit {
  list: Item[]
  list$: Observable&#x3C;Item[]>

  ngOnInit(): void {
    this.list$ = this.api
      .getList()
      .pipe(take(1))
      .subscribe(list => {
        this.list = list
      })
  }
}
</code></pre>
<p>인자로 넣어준 숫자만큼 <strong>publish</strong>가 일어나면 구독을 종료합니다.</p>
<h2>First</h2>
<pre><code>export class SomeComponent implements OnInit {
  list: Item[]
  list$: Observable&#x3C;Item[]>

  ngOnInit(): void {
    this.list$ = this.api
      .getList()
      .pipe(first())
      .subscribe(list => {
        this.list = list
      })
  }
}
</code></pre>
<p>첫번째 구독만 받는 operator입니다.
인자로 expression을 넘겨줄 수 있습니다.</p>
<p>이 밖에도 효율적인 <strong>Unsubscribe</strong> 방법이 있다면 알려주세요 !!</p>
</div></article></div></div><script src="/_next/static/chunks/webpack-b1abe5c771310ce9.js" async=""></script><script src="/_next/static/chunks/0b7c6ed9-5895ea2b955a8219.js" async=""></script><script src="/_next/static/chunks/474-2bfbc4a0bef14471.js" async=""></script><script src="/_next/static/chunks/main-app-658fb0ddf7baceee.js" async=""></script></body></html><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"0:\"$L1\"\n"])</script><script>self.__next_f.push([1,"2:I{\"id\":\"9638\",\"name\":\"\",\"chunks\":[\"272:webpack-b1abe5c771310ce9\",\"776:0b7c6ed9-5895ea2b955a8219\",\"474:474-2bfbc4a0bef14471\"],\"async\":false}\n4:I{\"id\":\"3644\",\"name\":\"\",\"chunks\":[\"272:webpack-b1abe5c771310ce9\",\"776:0b7c6ed9-5895ea2b955a8219\",\"474:474-2bfbc4a0bef14471\"],\"async\":false}\n6:I{\"id\":\"2070\",\"name\":\"\",\"chunks\":[\"131:131-b649a46ff1b8d8bb\",\"185:app/layout-8083bdbad8f07641\"],\"async\":false}\n7:I{\"id\":\"7131\",\"name\":\"\",\"chunks\":[\"131:131-b649a46ff1b8d8bb\",\"179:app/essay/page-803925d136c9d05d\"],\"async\":false"])</script><script>self.__next_f.push([1,"}\n8:I{\"id\":\"830\",\"name\":\"\",\"chunks\":[\"272:webpack-b1abe5c771310ce9\",\"776:0b7c6ed9-5895ea2b955a8219\",\"474:474-2bfbc4a0bef14471\"],\"async\":false}\n9:I{\"id\":\"2079\",\"name\":\"\",\"chunks\":[\"272:webpack-b1abe5c771310ce9\",\"776:0b7c6ed9-5895ea2b955a8219\",\"474:474-2bfbc4a0bef14471\"],\"async\":false}\n"])</script><script>self.__next_f.push([1,"1:[\"$\",\"$L2\",null,{\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/blog/2018-11-21-how-to-unsubscibe-in-rxjs\",\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"2018-11-21-how-to-unsubscibe-in-rxjs\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"2018-11-21-how-to-unsubscibe-in-rxjs\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":\"$L3\",\"globalErrorComponent\":\"$4\",\"notFound\":[\"$@5\",[\"$\",\"html\",null,{\"lang\":\"en\",\"data-theme\":\"retro\",\"children\":[\"$\",\"body\",null,{\"className\":\"flex flex-col items-center h-[100svh]\",\"children\":[[\"$\",\"$L6\",null,{\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-XR7V7MF96T\",\"strategy\":\"afterInteractive\"}],[\"$\",\"$L6\",null,{\"id\":\"google-analytics\",\"strategy\":\"afterInteractive\",\"children\":\"\\n          window.dataLayer = window.dataLayer || [];\\n          function gtag(){window.dataLayer.push(arguments);}\\n          gtag('js', new Date());\\n\\n          gtag('config', 'G-XR7V7MF96T');\\n        \"}],[\"$\",\"div\",null,{\"className\":\"w-full max-w-3xl flex-grow\",\"children\":[[\"$\",\"div\",null,{\"className\":\"navbar bg-base-100\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"$L7\",null,{\"className\":\"p-2 hover:underline md:text-2xl font-bold flex gap-4 items-center\",\"href\":\"/\",\"children\":\"Yozzing Blog\"}]}],[\"$\",\"div\",null,{\"className\":\"flex-none\",\"children\":[\"$\",\"div\",null,{\"className\":\"tabs\",\"children\":[[\"$\",\"$L7\",null,{\"className\":\"tab\",\"href\":\"/engineering\",\"children\":\"엔지니어링\"}],[\"$\",\"$L7\",null,{\"className\":\"tab\",\"href\":\"/essay\",\"children\":\"에세이\"}],[\"$\",\"a\",null,{\"className\":\"tab\",\"href\":\"https://github.com/ddalpange\",\"children\":[\"$\",\"div\",null,{\"className\":\"avatar\",\"children\":[\"$\",\"div\",null,{\"className\":\"w-8 rounded-full\",\"children\":[\"$\",\"img\",null,{\"src\":\"/blog/images/profile.jpeg\"}]}]}]}]]}]}]]}],[\"$\",\"div\",null,{\"className\":\"p-4 pb-10\",\"children\":[\"$undefined\",[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]]}]]}]]}]}]],\"asNotFound\":false,\"children\":[[\"$\",\"html\",null,{\"lang\":\"en\",\"data-theme\":\"retro\",\"children\":[\"$\",\"body\",null,{\"className\":\"flex flex-col items-center h-[100svh]\",\"children\":[[\"$\",\"$L6\",null,{\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-XR7V7MF96T\",\"strategy\":\"afterInteractive\"}],[\"$\",\"$L6\",null,{\"id\":\"google-analytics\",\"strategy\":\"afterInteractive\",\"children\":\"\\n          window.dataLayer = window.dataLayer || [];\\n          function gtag(){window.dataLayer.push(arguments);}\\n          gtag('js', new Date());\\n\\n          gtag('config', 'G-XR7V7MF96T');\\n        \"}],[\"$\",\"div\",null,{\"className\":\"w-full max-w-3xl flex-grow\",\"children\":[[\"$\",\"div\",null,{\"className\":\"navbar bg-base-100\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"$L7\",null,{\"className\":\"p-2 hover:underline md:text-2xl font-bold flex gap-4 items-center\",\"href\":\"/\",\"children\":\"Yozzing Blog\"}]}],[\"$\",\"div\",null,{\"className\":\"flex-none\",\"children\":[\"$\",\"div\",null,{\"className\":\"tabs\",\"children\":[[\"$\",\"$L7\",null,{\"className\":\"tab\",\"href\":\"/engineering\",\"children\":\"엔지니어링\"}],[\"$\",\"$L7\",null,{\"className\":\"tab\",\"href\":\"/essay\",\"children\":\"에세이\"}],[\"$\",\"a\",null,{\"className\":\"tab\",\"href\":\"https://github.com/ddalpange\",\"children\":[\"$\",\"div\",null,{\"className\":\"avatar\",\"children\":[\"$\",\"div\",null,{\"className\":\"w-8 rounded-full\",\"children\":[\"$\",\"img\",null,{\"src\":\"/blog/images/profile.jpeg\"}]}]}]}]]}]}]]}],[\"$\",\"div\",null,{\"className\":\"p-4 pb-10\",\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",[\"slug\",\"2018-11-21-how-to-unsubscibe-in-rxjs\",\"d\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$La\",\"$@b\"],\"segment\":\"__PAGE__?{\\\"slug\\\":\\\"2018-11-21-how-to-unsubscibe-in-rxjs\\\"}\"}}],\"segment\":[\"slug\",\"2018-11-21-how-to-unsubscibe-in-rxjs\",\"d\"]}}],\"segment\":\"blog\"}}]}]]}]]}]}],\"$@c\"]}]\n"])</script><script>self.__next_f.push([1,"5:[null,null,[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/6aab0c2b0a3a27f2.css\",\"precedence\":\"next.js\"}]]]\nb:[null,null,[]]\nc:[null,null,[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/6aab0c2b0a3a27f2.css\",\"precedence\":\"next.js\"}]]]\n"])</script><script>self.__next_f.push([1,"a:[\"$\",\"article\",null,{\"className\":\"prose\",\"children\":[[\"$\",\"h1\",null,{\"children\":\"Rxjs 구독을 취소하는 여러가지 방법\"}],[\"$\",\"caption\",null,{\"children\":\"2018/11/21\"}],[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e\u003cstrong\u003eAngular\u003c/strong\u003e는 기본적으로 \u003cstrong\u003eRxJS\u003c/strong\u003e를 사용합니다. \u003cstrong\u003eRxJS\u003c/strong\u003e를 사용할때 스트림을 연 컴포넌트가 없어진다 해도 열린 스트림은 닫히지 않기 때문에 메모리를 계속 먹습니다. 그렇기 때문에 \u003cstrong\u003eUnsubscribe\u003c/strong\u003e를 호출하여 스트림을 닫아주어야하는데요. 매번 \u003cstrong\u003eUnsubscribe\u003c/strong\u003e를 하기는 너무나 귀찮음으로 스트림 구독을 해제할 수 있는 다양한 방법을 소개합니다.\\n참고로 \u003cstrong\u003eHttpClient\u003c/strong\u003e, \u003cstrong\u003eRouter\u003c/strong\u003e 등 앵귤러 내부에서 제공하는 기능들은 따로 \u003cstrong\u003eUnsubscribe\u003c/strong\u003e를 하지 않아도 자동으로 구독을 해제합니다.\u003c/p\u003e\\n\u003ch2\u003eAsync Pipe\u003c/h2\u003e\\n\u003cpre\u003e\u003ccode\u003eexport class SomeComponent implements OnInit {\\n  list$: Observable\u0026#x3C;Item[]\u003e\\n  ngOnInit(): void {\\n    this.list$ = this.api.getList()\\n  }\\n}\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cpre\u003e\u003ccode\u003e\u0026#x3C;ng-container *ngIf=\\\"list$ | async as list; else loadingTemplate\\\"\u003e\\n  \u0026#x3C;app-table [list]=\\\"list\\\" [keys]=\\\"keys\\\"\u003e\u0026#x3C;/app-table\u003e\\n\u0026#x3C;/ng-container\u003e\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e\u003cstrong\u003eAngular\u003c/strong\u003e 에서 제공하는 \u003cstrong\u003eAsync\u003c/strong\u003e pipe를 사용하는 방법입니다.\\n\u003cstrong\u003eAsync\u003c/strong\u003e pipe가 알아서 Observable을 구독하고 해지하기 때문에 사용자는 별도로 신경써줄 필요가 없죠. 다만 이 방법은 두가지의 문제가 있습니다.\u003c/p\u003e\\n\u003cpre\u003e\u003ccode\u003eexport class SomeComponent implements OnInit {\\n  list$: Observable\u0026#x3C;Item[]\u003e\\n  ngOnInit(): void {\\n    this.list$ = this.api.getList().pipe(tap(list =\u003e console.log(list)))\\n  }\\n}\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e첫번째로 스크립트내에서 데이터를 쓰기가 귀찮습니다. html에서 event를 통해서 받거나, 아니면 tap operator를 이용해 후킹하여 데이터를 저장해야합니다.\u003c/p\u003e\\n\u003cpre\u003e\u003ccode\u003e\u0026#x3C;section\u003e\\n  \u0026#x3C;ng-container *ngIf=\\\"list$ | async as list; else loadingTemplate\\\"\u003e\\n    \u0026#x3C;app-table [list]=\\\"list\\\" [keys]=\\\"keys\\\"\u003e\u0026#x3C;/app-table\u003e\\n  \u0026#x3C;/ng-container\u003e\\n\u0026#x3C;/section\u003e\\n\u0026#x3C;footer class=\\\"another\\\"\u003e\\n  \u0026#x3C;!-- Error --\u003e\\n  \u0026#x3C;pre [innerHTML]=\\\"list | json\\\"\u003e\u0026#x3C;/pre\u003e\\n\u0026#x3C;/footer\u003e\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003elist를 선언한 안쪽이 아닌 바깥쪽에서는 list에 접근할 수가 없습니다.\\nasync pipe를 여러번 사용하면 api 요청도 여러번 날라가기 때문에 미리 마크업 구조를 잡고 가야합니다.\u003c/p\u003e\\n\u003ch2\u003eTakeUntill\u003c/h2\u003e\\n\u003cpre\u003e\u003ccode\u003eexport class SomeComponent implements OnInit, OnDestroy {\\n  list: Item[]\\n  list$: Observable\u0026#x3C;Item[]\u003e\\n  private unsubscribe$ = new Subject()\\n  ngOnInit(): void {\\n    this.list$ = this.api\\n      .getList()\\n      .pipe(takeUntill(this.unsubscribe$))\\n      .subscribe(list =\u003e {\\n        this.list = list\\n      })\\n  }\\n  ngOnDestroy(): void {\\n    this.unsubscribe$.next()\\n    this.unsubscribe$.complete()\\n  }\\n}\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e인자로 넣어준 Observable (Subject)가 값을 방출하거나 종료할 경우 구독을 해제합니다.\u003c/p\u003e\\n\u003ch2\u003eTakeWhile\u003c/h2\u003e\\n\u003cpre\u003e\u003ccode\u003eexport class SomeComponent implements OnInit, OnDestroy {\\n  list: Item[]\\n  list$: Observable\u0026#x3C;Item[]\u003e\\n  private subscribing = true\\n  ngOnInit(): void {\\n    this.list$ = this.api\\n      .getList()\\n      .pipe(takeWhile(this.subscribing))\\n      .subscribe(list =\u003e {\\n        this.list = list\\n      })\\n  }\\n  ngOnDestroy(): void {\\n    this.subscribing = false\\n  }\\n}\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e인자로 넣어준 Boolean 값이 false일 경우 구독이 일어나지 않습니다.\u003c/p\u003e\\n\u003ch2\u003eTake\u003c/h2\u003e\\n\u003cpre\u003e\u003ccode\u003eexport class SomeComponent implements OnInit {\\n  list: Item[]\\n  list$: Observable\u0026#x3C;Item[]\u003e\\n\\n  ngOnInit(): void {\\n    this.list$ = this.api\\n      .getList()\\n      .pipe(take(1))\\n      .subscribe(list =\u003e {\\n        this.list = list\\n      })\\n  }\\n}\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e인자로 넣어준 숫자만큼 \u003cstrong\u003epublish\u003c/strong\u003e가 일어나면 구독을 종료합니다.\u003c/p\u003e\\n\u003ch2\u003eFirst\u003c/h2\u003e\\n\u003cpre\u003e\u003ccode\u003eexport class SomeComponent implements OnInit {\\n  list: Item[]\\n  list$: Observable\u0026#x3C;Item[]\u003e\\n\\n  ngOnInit(): void {\\n    this.list$ = this.api\\n      .getList()\\n      .pipe(first())\\n      .subscribe(list =\u003e {\\n        this.list = list\\n      })\\n  }\\n}\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e첫번째 구독만 받는 operator입니다.\\n인자로 expression을 넘겨줄 수 있습니다.\u003c/p\u003e\\n\u003cp\u003e이 밖에도 효율적인 \u003cstrong\u003eUnsubscribe\u003c/strong\u003e 방법이 있다면 알려주세요 !!\u003c/p\u003e\\n\"}}]]}]\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],[\"$\",\"title\",null,{\"children\":\"Rxjs 구독을 취소하는 여러가지 방법\"}],[\"$\",\"meta\",null,{\"name\":\"description\",\"content\":\"\u003cp\u003e\u003cstrong\u003eAngular\u003c/strong\u003e는 기본적으로 \u003cstrong\u003eRxJS\u003c/strong\u003e를 사용합니다. \u003cstrong\u003eRxJS\u003c/strong\u003e를 사용할때 스트림을 연 컴포넌트가 없어진다 해도 열린 스트림은 닫히지 않기 때문에 메모리를 계속 먹습니다. 그렇기 때문에 \u003cstrong\u003eUnsubscribe\u003c/strong\u003e를 호출하여 스트림을 닫아주어야하는데요. 매번 \u003cstrong\u003eUnsubscribe\u003c/strong\u003e를 하기는 너무나 귀찮음으로 스트림 구독을 해제할 수 있는 다양한 방법을 소개합니다.\\n참고로 \u003cstrong\u003eHttpClient\u003c/strong\u003e, \u003cstrong\u003eRouter\u003c/strong\u003e 등 앵귤러 내부에서 제공하는 기능들은 따로 \u003cstrong\u003eUnsubscribe\u003c/strong\u003e를 하지 않아도 자동으로 구독을 해제합니다.\u003c/p\u003e\\n\"}],null,[[[\"$\",\"link\",null,{\"rel\":\"author\",\"href\":\"https://github.io/ddalpange\"}],[\"$\",\"meta\",null,{\"name\":\"author\",\"content\":\"ddalpange\"}]]],null,null,[\"$\",\"meta\",null,{\"name\":\"keywords\",\"content\":\"RxJS,Unsubscribe,Stream,Event\"}],null,null,null,[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,null,null,null,[null,[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"any\"}]],[],null]]\n"])</script>