{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/2017-10-03-project-make-simple-memo-6/",
    "result": {"data":{"site":{"siteMetadata":{"title":"YH.K Logs"}},"markdownRemark":{"id":"a9d2a455-c0d4-58bf-8590-60400b2e3c71","excerpt":"이번시간에는 아이오닉에서 제공해주는 무한 스크롤(infinite scroll)을 적용해볼거에요!! 테스트 환경 작성 테스트케이스 작성을 위해서 아래 코드를 메모리스트 페이지의 ngOnInit 생명주기 메서드의 아래의 코드를 작성한 후 새로고침해주세요. 500…","html":"<p>이번시간에는 아이오닉에서 제공해주는 무한 스크롤(infinite scroll)을 적용해볼거에요!!</p>\n<!-- more -->\n<h3>테스트 환경 작성</h3>\n<p>테스트케이스 작성을 위해서 아래 코드를 <strong>메모리스트</strong> 페이지의 <strong>ngOnInit</strong> 생명주기 메서드의 아래의 코드를 작성한 후 새로고침해주세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>memoManager<span class=\"token punctuation\">.</span><span class=\"token function\">createMemo</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">제목</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">내용</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token punctuation\">.</span>toString<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>5000개가 넘어가면 메모리스트 페이지가 많이 느려지는걸 볼 수 있습니다.\n텍스트만 있어도 느린데 이미지가 있는 페이지라면 어느정도일지 짐작이 되시겠죠?</p>\n<h3>코드 작성</h3>\n<div class=\"gatsby-highlight\" data-language=\"htmlsrc/pages/memo-list/memo-list/html\"><pre class=\"language-htmlsrc/pages/memo-list/memo-list/html\"><code class=\"language-htmlsrc/pages/memo-list/memo-list/html\">&lt;ion-header&gt;\n  &lt;ion-navbar color=&quot;primary&quot;&gt;\n    &lt;ion-searchbar [(ngModel)]=&quot;searchKeyword&quot;&gt;&lt;/ion-searchbar&gt;\n    &lt;ion-buttons end&gt;\n      &lt;button ion-button icon-only (click)=&quot;onClickMoreOption()&quot;&gt;\n        &lt;ion-icon name=&quot;more&quot;&gt; &lt;/ion-icon&gt;\n      &lt;/button&gt;\n    &lt;/ion-buttons&gt;\n  &lt;/ion-navbar&gt;\n&lt;/ion-header&gt;\n&lt;ion-content&gt;\n  &lt;ng-template\n    ngFor\n    let-memo\n    [ngForOf]=&quot;memoList | async | slice : 0 : viewCount&quot;\n    let-i=&quot;index&quot;\n  &gt;\n    &lt;ion-card (click)=&quot;onClickViewMemoDetail(memo)&quot; *ngIf=&quot;filterMemo(memo)&quot;&gt;\n      &lt;ion-card-header&gt; {{ memo.title }} &lt;/ion-card-header&gt;\n      &lt;ion-card-content&gt; {{ memo.contents }} &lt;/ion-card-content&gt;\n    &lt;/ion-card&gt;\n  &lt;/ng-template&gt;\n  &lt;ion-infinite-scroll (ionInfinite)=&quot;doInfinite($event)&quot;&gt;\n    &lt;ion-infinite-scroll-content\n      loadingSpinner=&quot;bubbles&quot;\n      loadingText=&quot;please waite...&quot;\n    &gt;&lt;/ion-infinite-scroll-content&gt;\n  &lt;/ion-infinite-scroll&gt;\n  &lt;ion-fab right bottom&gt;\n    &lt;button ion-fab icon-only (click)=&quot;onClickCreateMemo()&quot;&gt;\n      &lt;ion-icon name=&quot;add&quot; big&gt;&lt;/ion-icon&gt;\n    &lt;/button&gt;\n  &lt;/ion-fab&gt;\n&lt;/ion-content&gt;</code></pre></div>\n<p>전체 코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ng-template</span>\n  <span class=\"token attr-name\">ngFor</span>\n  <span class=\"token attr-name\">let-memo</span>\n  <span class=\"token attr-name\">[ngForOf]</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>memoList | async | slice : 0 : viewCount<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">let-i</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>index<span class=\"token punctuation\">\"</span></span>\n<span class=\"token punctuation\">></span></span>\n  ...\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ng-template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ion-infinite-scroll</span> <span class=\"token attr-name\">(ionInfinite)</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>doInfinite($event)<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  ...\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ion-infinite-scroll</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ion-infinite-scroll</span>\n<span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ion-infinite-scroll</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><strong>ionInfinite</strong>에 주목하세요. ion-infinite-scroll 태그가 화면상에 보일경우 등록해놓은 <strong>doInfinite</strong> 함수를 호출합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> AuthManagerProvider <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./../../providers/auth-manager/auth-manager\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> FirebaseListObservable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"angularfire2/database\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Memo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./../../models/memo/memo.interface\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> OnInit <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@angular/core\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  IonicPage<span class=\"token punctuation\">,</span>\n  NavController<span class=\"token punctuation\">,</span>\n  NavParams<span class=\"token punctuation\">,</span>\n  LoadingController<span class=\"token punctuation\">,</span>\n  ActionSheetController<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"ionic-angular\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> MemoCreatePage <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./../memo-create/memo-create\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> MemoDetailPage <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./../memo-detail/memo-detail\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> MemoManagerProvider <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./../../providers/memo-manager/memo-manager\"</span>\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">IonicPage</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Component</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token operator\">:</span> <span class=\"token string\">\"page-memo-list\"</span><span class=\"token punctuation\">,</span>\n  templateUrl<span class=\"token operator\">:</span> <span class=\"token string\">\"memo-list.html\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MemoListPage</span> <span class=\"token punctuation\">{</span>\n  searchKeyword<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\n  viewCount<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n  memoList<span class=\"token operator\">:</span> FirebaseListObservable<span class=\"token operator\">&lt;</span>Memo<span class=\"token operator\">></span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">public</span> navCtrl<span class=\"token operator\">:</span> NavController<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">public</span> navParams<span class=\"token operator\">:</span> NavParams<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">public</span> loadingCtrl<span class=\"token operator\">:</span> LoadingController<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">public</span> actionSheetCtrl<span class=\"token operator\">:</span> ActionSheetController<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">public</span> authManager<span class=\"token operator\">:</span> AuthManagerProvider<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">public</span> memoManager<span class=\"token operator\">:</span> MemoManagerProvider\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>memoList <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>memoManager<span class=\"token punctuation\">.</span><span class=\"token function\">getMemoList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">doInfinite</span><span class=\"token punctuation\">(</span>infiniteScroll<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>viewCount <span class=\"token operator\">+=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>viewCount\n      infiniteScroll<span class=\"token punctuation\">.</span><span class=\"token function\">complete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">filterMemo</span><span class=\"token punctuation\">(</span>memo<span class=\"token operator\">:</span> Memo<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      memo<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>searchKeyword<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span>\n      memo<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>searchKeyword<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">onClickViewMemoDetail</span><span class=\"token punctuation\">(</span>memo<span class=\"token operator\">:</span> Memo<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>navCtrl<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>MemoDetailPage<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> memo<span class=\"token operator\">:</span> memo <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">onClickCreateMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>navCtrl<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>MemoCreatePage<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">onClickMoreOption</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> actionSheet <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMoreOptionActionSheet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    actionSheet<span class=\"token punctuation\">.</span><span class=\"token function\">present</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">getMoreOptionActionSheet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>actionSheetCtrl<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      buttons<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          text<span class=\"token operator\">:</span> <span class=\"token string\">\"Logout\"</span><span class=\"token punctuation\">,</span>\n          role<span class=\"token operator\">:</span> <span class=\"token string\">\"destructive\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token function-variable function\">handler</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>authManager<span class=\"token punctuation\">.</span><span class=\"token function\">logoutUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          text<span class=\"token operator\">:</span> <span class=\"token string\">\"Cancel\"</span><span class=\"token punctuation\">,</span>\n          role<span class=\"token operator\">:</span> <span class=\"token string\">\"cancel\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>별거없죠? slice할 viewCount를 증가시켜주고, infiniteScroll 이벤트를 종료합니다.</p>\n<hr>\n<p>참고 링크</p>\n<ul>\n<li><a href=\"https://github.com/ddalpange/simple-memo\">해당 포스트에 작성된 모든 코드는 여기에 있습니다!</a></li>\n<li><a href=\"https://memo-28314.firebaseapp.com\">해당 프로젝트는 여기서 볼 수 있습니다 !!</a></li>\n</ul>","frontmatter":{"title":"간단한 메모장 만들기 6 - 무한 스크롤 적용","date":"October 03, 2017","description":null}},"previous":{"fields":{"slug":"/2017-10-03-project-make-simple-memo-5/"},"frontmatter":{"title":"간단한 메모장 만들기 5 - CRUD"}},"next":{"fields":{"slug":"/2017-10-03-make-new-blog/"},"frontmatter":{"title":"헥소 블로그 삽질"}}},"pageContext":{"id":"a9d2a455-c0d4-58bf-8590-60400b2e3c71","previousPostId":"cab051e8-e0ff-57c9-a3b8-ad0553d3278b","nextPostId":"e3d0554d-9f32-561b-9084-3bc9f92180c6"}},
    "staticQueryHashes": ["230163734","2841359383"]}